{"remainingRequest":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\babel-loader\\lib\\index.js!D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\wy\\my-project\\baolong_h5\\baolong_h5\\src\\components\\table\\AppTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\src\\components\\table\\AppTable.vue","mtime":1611735005233},{"path":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmZpeGVkLmpzIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovd3kvbXktcHJvamVjdC9iYW9sb25nX2g1L2Jhb2xvbmdfaDUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkQ6L3d5L215LXByb2plY3QvYmFvbG9uZ19oNS9iYW9sb25nX2g1L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiRDovd3kvbXktcHJvamVjdC9iYW9sb25nX2g1L2Jhb2xvbmdfaDUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEFwcFRhYmxlQ29sdW1uIGZyb20gJy4vQXBwVGFibGVDb2x1bW4nOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwcFRhYmxlJywKICBjb21wb25lbnRzOiB7CiAgICBBcHBUYWJsZUNvbHVtbjogQXBwVGFibGVDb2x1bW4KICB9LAogIHByb3BzOiB7CiAgICBjb2x1bW5zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICByb3dzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICBoZWFkRml4ZWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LAogICAgYm9yZGVyZWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29tcG9uZW50OiB7CiAgICAgICAgcm93czogW10sCiAgICAgICAgc29ydEJ5OiB7CiAgICAgICAgICBrZXk6IG51bGwsCiAgICAgICAgICBkaXJlY3Rpb246IG51bGwKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgdHBsQ2xhc3NlczogZnVuY3Rpb24gdHBsQ2xhc3NlcygpIHsKICAgICAgdmFyIF9yZWY7CgogICAgICByZXR1cm4gX3JlZiA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgJ2hlYWQtZml4ZWQnLCB0aGlzLmhlYWRGaXhlZCksIF9kZWZpbmVQcm9wZXJ0eShfcmVmLCAiYm9yZGVyZWQiLCB0aGlzLmJvcmRlcmVkKSwgX3JlZjsKICAgIH0sCiAgICB0cGxDb2x1bW5zTWFwOiBmdW5jdGlvbiB0cGxDb2x1bW5zTWFwKCkgewogICAgICByZXR1cm4gKHRoaXMuY29sdW1ucyB8fCBbXSkucmVkdWNlKGZ1bmN0aW9uIChyZXN1bHQsIGNvbHVtbikgewogICAgICAgIHN3aXRjaCAoY29sdW1uLmZpeGVkKSB7CiAgICAgICAgICBjYXNlIHRydWU6CiAgICAgICAgICAgIHJlc3VsdC5sZWZ0LnB1c2goY29sdW1uKTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmVzdWx0Lm5vcm1hbC5wdXNoKGNvbHVtbik7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfSwgewogICAgICAgIGxlZnQ6IFtdLAogICAgICAgIG5vcm1hbDogW10sCiAgICAgICAgcmlnaHQ6IFtdCiAgICAgIH0pOwogICAgfSwKICAgIHRwbFJvd3M6IGZ1bmN0aW9uIHRwbFJvd3MoKSB7CiAgICAgIHJldHVybiBfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5jb21wb25lbnQucm93cyk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvbkNvbHVtbkNsaWNrOiBmdW5jdGlvbiBvbkNvbHVtbkNsaWNrKF9yZWYyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgY29sdW1uID0gT2JqZWN0LmFzc2lnbih7fSwgX3JlZjIpOwoKICAgICAgdmFyIHBheWxvYWQgPSBfb2JqZWN0U3ByZWFkKHt9LCBjb2x1bW4pOwoKICAgICAgaWYgKGNvbHVtbi5zb3J0YWJsZSkgewogICAgICAgICh0eXBlb2YgY29sdW1uLnNvcnRhYmxlID09PSAnZnVuY3Rpb24nID8gY29sdW1uLnNvcnRhYmxlIDogZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgIGlmICghcGF5bG9hZC5rZXkpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcign5rKh5pyJ6YWN572u44CMa2V544CN77yM5LiN6IO96L+b6KGM5o6S5bqPJyk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIF90aGlzJGNvbXBvbmVudCRzb3J0QiA9IF90aGlzLmNvbXBvbmVudC5zb3J0QnksCiAgICAgICAgICAgICAgc29ydEtleSA9IF90aGlzJGNvbXBvbmVudCRzb3J0Qi5rZXksCiAgICAgICAgICAgICAgc29ydERpcmVjdGlvbiA9IF90aGlzJGNvbXBvbmVudCRzb3J0Qi5kaXJlY3Rpb247CiAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gewogICAgICAgICAgICBhc2M6ICdkZXNjJywKICAgICAgICAgICAgZGVzYzogbnVsbCwKICAgICAgICAgICAgbnVsbDogJ2FzYycKICAgICAgICAgIH1bc29ydEtleSAhPT0gY29sdW1uLmtleSA/IG51bGwgOiBzb3J0RGlyZWN0aW9uXTsKICAgICAgICAgIF90aGlzLmNvbXBvbmVudC5zb3J0Qnkua2V5ID0gY29sdW1uLmtleTsKICAgICAgICAgIF90aGlzLmNvbXBvbmVudC5zb3J0QnkuZGlyZWN0aW9uID0gZGlyZWN0aW9uOwogICAgICAgICAgX3RoaXMuY29tcG9uZW50LnJvd3MgPSBkaXJlY3Rpb24gPyBfdG9Db25zdW1hYmxlQXJyYXkoX3RoaXMucm93cykuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICByZXR1cm4gKGFbY29sdW1uLmtleV0gPiBiW2NvbHVtbi5rZXldID8gMSA6IC0xKSAqIChkaXJlY3Rpb24gPT09ICdhc2MnID8gMSA6IC0xKTsKICAgICAgICAgIH0pIDogX3RvQ29uc3VtYWJsZUFycmF5KF90aGlzLnJvd3MpOwogICAgICAgIH0pKHBheWxvYWQpOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb2x1bW4uY2xpY2sgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBjb2x1bW4uY2xpY2socGF5bG9hZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kZW1pdCgnb24tY29sdW1uLWNsaWNrJywgcGF5bG9hZCk7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmNvbXBvbmVudC5yb3dzID0gX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMucm93cyk7CiAgfQp9Ow=="},{"version":3,"sources":["AppTable.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"app-table\" :class=\"tplClasses\">\r\n        <div class=\"app-table__head\">\r\n            <div class=\"app-table__head__item left-fixed\">\r\n                <app-table-column :items=\"tplColumnsMap.left\" @on-column-click=\"onColumnClick\">\r\n                    <template #column-icon=\"scope\">\r\n                        <i\r\n                            :class=\"[\r\n                                'sortable',\r\n                                component.sortBy.key === scope.key ? { asc: 'up', desc: 'down' }[component.sortBy.direction] || '' : '',\r\n                            ]\"\r\n                        ></i>\r\n                    </template>\r\n                </app-table-column>\r\n            </div>\r\n            <div class=\"app-table__head__item\">\r\n                <app-table-column :items=\"tplColumnsMap.normal\" @on-column-click=\"onColumnClick\">\r\n                    <template #column-icon=\"scope\">\r\n                        <i\r\n                            :class=\"[\r\n                                'sortable',\r\n                                component.sortBy.key === scope.key ? { asc: 'up', desc: 'down' }[component.sortBy.direction] || '' : '',\r\n                            ]\"\r\n                        ></i>\r\n                    </template>\r\n                </app-table-column>\r\n            </div>\r\n        </div>\r\n        <div class=\"app-table__body\">\r\n            <div class=\"app-table__body__row\" v-for=\"(row, rowi) in tplRows\" :key=\"rowi\">\r\n                <div class=\"app-table__body__row__items left-fixed\">\r\n                    <app-table-column :items=\"tplColumnsMap.left\" :row=\"row\"></app-table-column>\r\n                </div>\r\n                <div class=\"app-table__body__row__items\">\r\n                    <app-table-column :items=\"tplColumnsMap.normal\" :row=\"row\"></app-table-column>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport AppTableColumn from './AppTableColumn';\r\n\r\nexport default {\r\n    name: 'AppTable',\r\n    components: {\r\n        AppTableColumn,\r\n    },\r\n    props: {\r\n        columns: {\r\n            type: Array,\r\n            default: () => [],\r\n        },\r\n        rows: {\r\n            type: Array,\r\n            default: () => [],\r\n        },\r\n        headFixed: {\r\n            type: Boolean,\r\n            default: () => false,\r\n        },\r\n        bordered: {\r\n            type: Boolean,\r\n            default: () => false,\r\n        },\r\n    },\r\n    data: () => {\r\n        return {\r\n            component: {\r\n                rows: [],\r\n                sortBy: {\r\n                    key: null,\r\n                    direction: null,\r\n                },\r\n            },\r\n        };\r\n    },\r\n    computed: {\r\n        tplClasses() {\r\n            return {\r\n                ['head-fixed']: this.headFixed,\r\n                bordered: this.bordered,\r\n            };\r\n        },\r\n        tplColumnsMap() {\r\n            return (this.columns || []).reduce(\r\n                (result, column) => {\r\n                    switch (column.fixed) {\r\n                        case true:\r\n                            result.left.push(column);\r\n                            break;\r\n                        default:\r\n                            result.normal.push(column);\r\n                            break;\r\n                    }\r\n                    return result;\r\n                },\r\n                { left: [], normal: [], right: [] },\r\n            );\r\n        },\r\n        tplRows() {\r\n            return [...this.component.rows];\r\n        },\r\n    },\r\n    methods: {\r\n        onColumnClick({ ...column }) {\r\n            const payload = { ...column };\r\n            if (column.sortable) {\r\n                (typeof column.sortable === 'function'\r\n                    ? column.sortable\r\n                    : (payload) => {\r\n                          if (!payload.key) {\r\n                              console.error('没有配置「key」，不能进行排序');\r\n                          }\r\n                          const { key: sortKey, direction: sortDirection } = this.component.sortBy;\r\n                          const direction = {\r\n                              asc: 'desc',\r\n                              desc: null,\r\n                              null: 'asc',\r\n                          }[sortKey !== column.key ? null : sortDirection];\r\n                          this.component.sortBy.key = column.key;\r\n                          this.component.sortBy.direction = direction;\r\n                          this.component.rows = direction\r\n                              ? [...this.rows].sort((a, b) => {\r\n                                    return (a[column.key] > b[column.key] ? 1 : -1) * (direction === 'asc' ? 1 : -1);\r\n                                })\r\n                              : [...this.rows];\r\n                      })(payload);\r\n            } else if (typeof column.click === 'function') {\r\n                column.click(payload);\r\n            } else {\r\n                this.$emit('on-column-click', payload);\r\n            }\r\n        },\r\n    },\r\n    created() {\r\n        this.component.rows = [...this.rows];\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.app-table {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n\r\n    &.head-fixed &__head {\r\n        position: sticky;\r\n        z-index: 2;\r\n        top: 0;\r\n        background-color: #ffffff;\r\n    }\r\n\r\n    &.bordered {\r\n        .app-table-column {\r\n            &__item {\r\n                border-color: #cccccc;\r\n            }\r\n        }\r\n    }\r\n\r\n    .left-fixed {\r\n        position: sticky;\r\n        z-index: 1;\r\n        left: 0;\r\n        background-color: #ffffff;\r\n    }\r\n\r\n    &__head {\r\n        display: inline-flex;\r\n        min-width: 100%;\r\n        white-space: nowrap;\r\n        &__item {\r\n            &:not(.left-fixed) {\r\n                flex: 1;\r\n            }\r\n            &:last-child > .app-table-column:last-child > .app-table-column__item:last-child {\r\n                border-right: none;\r\n            }\r\n\r\n            i.sortable {\r\n                display: inline-block;\r\n                width: 12px;\r\n                height: 12px;\r\n                background-repeat: no-repeat;\r\n                background-size: contain;\r\n                background-position: center;\r\n                background-image: url(../../assets/images/icon-sortable.png);\r\n                &.up {\r\n                    background-image: url(../../assets/images/icon-sortup.png);\r\n                }\r\n                &.down {\r\n                    background-image: url(../../assets/images/icon-sortdown.png);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    &__body__row {\r\n        display: inline-flex;\r\n        min-width: 100%;\r\n        white-space: nowrap;\r\n        &__items {\r\n            &:not(.left-fixed) {\r\n                flex: 1;\r\n            }\r\n            &:last-child > .app-table-column:last-child > .app-table-column__item:last-child {\r\n                border-right: none;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/table"}]}