{"remainingRequest":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\wy\\my-project\\baolong_h5\\baolong_h5\\src\\components\\projectSelect\\projectList.vue?vue&type=style&index=0&id=428f975d&lang=scss&scoped=true&","dependencies":[{"path":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\src\\components\\projectSelect\\projectList.vue","mtime":1611581655071},{"path":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5wcm9qZWN0LWxpc3Qgew0KCXdpZHRoOiAxMDAlOw0KCWhlaWdodDogMTAwJTsNCglvdmVyZmxvdzogYXV0bzsNCgliYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KCWNvbG9yOiAjMzMzOw0KfQ0KL2RlZXAvLnZhbi1pbmRleC1hbmNob3Igew0KCXdpZHRoOiAxMDAlOw0KCWhlaWdodDogNDZweDsNCglsaW5lLWhlaWdodDogNDZweDsNCglmb250LXNpemU6IDE2cHg7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7DQoJcGFkZGluZzogMCAxMHB4Ow0KCWJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZTVlNWU1Ow0KCWJhY2tncm91bmQ6ICNlZWU7DQp9DQo="},{"version":3,"sources":["projectList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"projectList.vue","sourceRoot":"src/components/projectSelect","sourcesContent":["<template>\r\n\t<div class=\"project-list\">\r\n\t\t<van-index-bar :index-list=\"indexList\" highlight-color=\"#3a96bd\">\r\n\t\t\t<div v-for=\"item in projectList\" :key=\"item.key\">\r\n\t\t\t\t<van-index-anchor :index=\"item.key\">{{ item.key }}</van-index-anchor>\r\n\t\t\t\t<van-cell :title=\"child.shortName\" v-for=\"child in item.children\" :key=\"child.bisProjectId\" @click=\"projeSelected(child)\"> </van-cell>\r\n\t\t\t</div>\r\n\t\t</van-index-bar>\r\n\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tprojectList: [],\r\n\t\t\tindexList: [],\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\tasync getProjectList() {\r\n\t\t\tlet data = [];\r\n\t\t\tlet projectList = localStorage.getItem(\"projectList\") && JSON.parse(localStorage.getItem(\"projectList\"));\r\n\t\t\tif (projectList && projectList.length > 0) {\r\n\t\t\t\tdata = projectList;\r\n\t\t\t} else {\r\n\t\t\t\tlet res = await this.$axios.getProjectList({ operStatus: 2 });\r\n\t\t\t\tdata = res.data;\r\n\t\t\t\tlocalStorage.setItem(\"projectList\", JSON.stringify(data));\r\n\t\t\t\t// this.$store.commit((\"projectList\", data));\r\n\t\t\t}\r\n\r\n\t\t\tthis.getProjectListFormat(data);\r\n\t\t},\r\n\t\tgetProjectListFormat(data) {\r\n\t\t\tlet result = [\r\n\t\t\t\t{\r\n\t\t\t\t\tkey: \"#\",\r\n\t\t\t\t\tchildren: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tshortName: \"全部\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t];\r\n\t\t\tdata.forEach((item) => {\r\n\t\t\t\tlet key = item.projectShortName.slice(0, 1);\r\n\t\t\t\tlet temp = result.find((v) => v.key === key);\r\n\t\t\t\tif (temp) {\r\n\t\t\t\t\ttemp.children.push(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\tkey: key,\r\n\t\t\t\t\t\tchildren: [item],\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.indexList = result.map((item) => item.key);\r\n\t\t\tthis.projectList = result;\r\n\t\t},\r\n\t\tprojeSelected(item) {\r\n\t\t\tthis.$emit(\"projeSelected\", item);\r\n\t\t},\r\n\t},\r\n\tmounted() {\r\n\t\tthis.getProjectList();\r\n\t},\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.project-list {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\toverflow: auto;\r\n\tbackground-color: #fff;\r\n\tcolor: #333;\r\n}\r\n/deep/.van-index-anchor {\r\n\twidth: 100%;\r\n\theight: 46px;\r\n\tline-height: 46px;\r\n\tfont-size: 16px;\r\n\tfont-weight: bold;\r\n\tpadding: 0 10px;\r\n\tborder-bottom: 1px solid #e5e5e5;\r\n\tbackground: #eee;\r\n}\r\n</style>\r\n"]}]}