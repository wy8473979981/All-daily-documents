{"remainingRequest":"D:\\项目\\宝龙驾驶舱H5改版\\baolong_h5\\baolong_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\项目\\宝龙驾驶舱H5改版\\baolong_h5\\baolong_h5\\src\\components\\table\\AppTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\项目\\宝龙驾驶舱H5改版\\baolong_h5\\baolong_h5\\src\\components\\table\\AppTable.vue","mtime":1611735005233},{"path":"D:\\项目\\宝龙驾驶舱H5改版\\baolong_h5\\baolong_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\宝龙驾驶舱H5改版\\baolong_h5\\baolong_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\项目\\宝龙驾驶舱H5改版\\baolong_h5\\baolong_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\宝龙驾驶舱H5改版\\baolong_h5\\baolong_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQXBwVGFibGVDb2x1bW4gZnJvbSAnLi9BcHBUYWJsZUNvbHVtbic7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAnQXBwVGFibGUnLA0KICAgIGNvbXBvbmVudHM6IHsNCiAgICAgICAgQXBwVGFibGVDb2x1bW4sDQogICAgfSwNCiAgICBwcm9wczogew0KICAgICAgICBjb2x1bW5zOiB7DQogICAgICAgICAgICB0eXBlOiBBcnJheSwNCiAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IFtdLA0KICAgICAgICB9LA0KICAgICAgICByb3dzOiB7DQogICAgICAgICAgICB0eXBlOiBBcnJheSwNCiAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IFtdLA0KICAgICAgICB9LA0KICAgICAgICBoZWFkRml4ZWQ6IHsNCiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBmYWxzZSwNCiAgICAgICAgfSwNCiAgICAgICAgYm9yZGVyZWQ6IHsNCiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiBmYWxzZSwNCiAgICAgICAgfSwNCiAgICB9LA0KICAgIGRhdGE6ICgpID0+IHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGNvbXBvbmVudDogew0KICAgICAgICAgICAgICAgIHJvd3M6IFtdLA0KICAgICAgICAgICAgICAgIHNvcnRCeTogew0KICAgICAgICAgICAgICAgICAgICBrZXk6IG51bGwsDQogICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogbnVsbCwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgfSwNCiAgICAgICAgfTsNCiAgICB9LA0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIHRwbENsYXNzZXMoKSB7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIFsnaGVhZC1maXhlZCddOiB0aGlzLmhlYWRGaXhlZCwNCiAgICAgICAgICAgICAgICBib3JkZXJlZDogdGhpcy5ib3JkZXJlZCwNCiAgICAgICAgICAgIH07DQogICAgICAgIH0sDQogICAgICAgIHRwbENvbHVtbnNNYXAoKSB7DQogICAgICAgICAgICByZXR1cm4gKHRoaXMuY29sdW1ucyB8fCBbXSkucmVkdWNlKA0KICAgICAgICAgICAgICAgIChyZXN1bHQsIGNvbHVtbikgPT4gew0KICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbHVtbi5maXhlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSB0cnVlOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5sZWZ0LnB1c2goY29sdW1uKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lm5vcm1hbC5wdXNoKGNvbHVtbik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsgbGVmdDogW10sIG5vcm1hbDogW10sIHJpZ2h0OiBbXSB9LA0KICAgICAgICAgICAgKTsNCiAgICAgICAgfSwNCiAgICAgICAgdHBsUm93cygpIHsNCiAgICAgICAgICAgIHJldHVybiBbLi4udGhpcy5jb21wb25lbnQucm93c107DQogICAgICAgIH0sDQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIG9uQ29sdW1uQ2xpY2soeyAuLi5jb2x1bW4gfSkgew0KICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHsgLi4uY29sdW1uIH07DQogICAgICAgICAgICBpZiAoY29sdW1uLnNvcnRhYmxlKSB7DQogICAgICAgICAgICAgICAgKHR5cGVvZiBjb2x1bW4uc29ydGFibGUgPT09ICdmdW5jdGlvbicNCiAgICAgICAgICAgICAgICAgICAgPyBjb2x1bW4uc29ydGFibGUNCiAgICAgICAgICAgICAgICAgICAgOiAocGF5bG9hZCkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBheWxvYWQua2V5KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfmsqHmnInphY3nva7jgIxrZXnjgI3vvIzkuI3og73ov5vooYzmjpLluo8nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGtleTogc29ydEtleSwgZGlyZWN0aW9uOiBzb3J0RGlyZWN0aW9uIH0gPSB0aGlzLmNvbXBvbmVudC5zb3J0Qnk7DQogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzYzogJ2Rlc2MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzYzogbnVsbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGw6ICdhc2MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICB9W3NvcnRLZXkgIT09IGNvbHVtbi5rZXkgPyBudWxsIDogc29ydERpcmVjdGlvbl07DQogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnNvcnRCeS5rZXkgPSBjb2x1bW4ua2V5Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5zb3J0QnkuZGlyZWN0aW9uID0gZGlyZWN0aW9uOw0KICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5yb3dzID0gZGlyZWN0aW9uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFsuLi50aGlzLnJvd3NdLnNvcnQoKGEsIGIpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoYVtjb2x1bW4ua2V5XSA+IGJbY29sdW1uLmtleV0gPyAxIDogLTEpICogKGRpcmVjdGlvbiA9PT0gJ2FzYycgPyAxIDogLTEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBbLi4udGhpcy5yb3dzXTsNCiAgICAgICAgICAgICAgICAgICAgICB9KShwYXlsb2FkKTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbHVtbi5jbGljayA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgICAgIGNvbHVtbi5jbGljayhwYXlsb2FkKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnb24tY29sdW1uLWNsaWNrJywgcGF5bG9hZCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgfSwNCiAgICBjcmVhdGVkKCkgew0KICAgICAgICB0aGlzLmNvbXBvbmVudC5yb3dzID0gWy4uLnRoaXMucm93c107DQogICAgfSwNCn07DQo="},{"version":3,"sources":["AppTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AppTable.vue","sourceRoot":"src/components/table","sourcesContent":["<template>\r\n    <div class=\"app-table\" :class=\"tplClasses\">\r\n        <div class=\"app-table__head\">\r\n            <div class=\"app-table__head__item left-fixed\">\r\n                <app-table-column :items=\"tplColumnsMap.left\" @on-column-click=\"onColumnClick\">\r\n                    <template #column-icon=\"scope\">\r\n                        <i\r\n                            :class=\"[\r\n                                'sortable',\r\n                                component.sortBy.key === scope.key ? { asc: 'up', desc: 'down' }[component.sortBy.direction] || '' : '',\r\n                            ]\"\r\n                        ></i>\r\n                    </template>\r\n                </app-table-column>\r\n            </div>\r\n            <div class=\"app-table__head__item\">\r\n                <app-table-column :items=\"tplColumnsMap.normal\" @on-column-click=\"onColumnClick\">\r\n                    <template #column-icon=\"scope\">\r\n                        <i\r\n                            :class=\"[\r\n                                'sortable',\r\n                                component.sortBy.key === scope.key ? { asc: 'up', desc: 'down' }[component.sortBy.direction] || '' : '',\r\n                            ]\"\r\n                        ></i>\r\n                    </template>\r\n                </app-table-column>\r\n            </div>\r\n        </div>\r\n        <div class=\"app-table__body\">\r\n            <div class=\"app-table__body__row\" v-for=\"(row, rowi) in tplRows\" :key=\"rowi\">\r\n                <div class=\"app-table__body__row__items left-fixed\">\r\n                    <app-table-column :items=\"tplColumnsMap.left\" :row=\"row\"></app-table-column>\r\n                </div>\r\n                <div class=\"app-table__body__row__items\">\r\n                    <app-table-column :items=\"tplColumnsMap.normal\" :row=\"row\"></app-table-column>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport AppTableColumn from './AppTableColumn';\r\n\r\nexport default {\r\n    name: 'AppTable',\r\n    components: {\r\n        AppTableColumn,\r\n    },\r\n    props: {\r\n        columns: {\r\n            type: Array,\r\n            default: () => [],\r\n        },\r\n        rows: {\r\n            type: Array,\r\n            default: () => [],\r\n        },\r\n        headFixed: {\r\n            type: Boolean,\r\n            default: () => false,\r\n        },\r\n        bordered: {\r\n            type: Boolean,\r\n            default: () => false,\r\n        },\r\n    },\r\n    data: () => {\r\n        return {\r\n            component: {\r\n                rows: [],\r\n                sortBy: {\r\n                    key: null,\r\n                    direction: null,\r\n                },\r\n            },\r\n        };\r\n    },\r\n    computed: {\r\n        tplClasses() {\r\n            return {\r\n                ['head-fixed']: this.headFixed,\r\n                bordered: this.bordered,\r\n            };\r\n        },\r\n        tplColumnsMap() {\r\n            return (this.columns || []).reduce(\r\n                (result, column) => {\r\n                    switch (column.fixed) {\r\n                        case true:\r\n                            result.left.push(column);\r\n                            break;\r\n                        default:\r\n                            result.normal.push(column);\r\n                            break;\r\n                    }\r\n                    return result;\r\n                },\r\n                { left: [], normal: [], right: [] },\r\n            );\r\n        },\r\n        tplRows() {\r\n            return [...this.component.rows];\r\n        },\r\n    },\r\n    methods: {\r\n        onColumnClick({ ...column }) {\r\n            const payload = { ...column };\r\n            if (column.sortable) {\r\n                (typeof column.sortable === 'function'\r\n                    ? column.sortable\r\n                    : (payload) => {\r\n                          if (!payload.key) {\r\n                              console.error('没有配置「key」，不能进行排序');\r\n                          }\r\n                          const { key: sortKey, direction: sortDirection } = this.component.sortBy;\r\n                          const direction = {\r\n                              asc: 'desc',\r\n                              desc: null,\r\n                              null: 'asc',\r\n                          }[sortKey !== column.key ? null : sortDirection];\r\n                          this.component.sortBy.key = column.key;\r\n                          this.component.sortBy.direction = direction;\r\n                          this.component.rows = direction\r\n                              ? [...this.rows].sort((a, b) => {\r\n                                    return (a[column.key] > b[column.key] ? 1 : -1) * (direction === 'asc' ? 1 : -1);\r\n                                })\r\n                              : [...this.rows];\r\n                      })(payload);\r\n            } else if (typeof column.click === 'function') {\r\n                column.click(payload);\r\n            } else {\r\n                this.$emit('on-column-click', payload);\r\n            }\r\n        },\r\n    },\r\n    created() {\r\n        this.component.rows = [...this.rows];\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.app-table {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n\r\n    &.head-fixed &__head {\r\n        position: sticky;\r\n        z-index: 2;\r\n        top: 0;\r\n        background-color: #ffffff;\r\n    }\r\n\r\n    &.bordered {\r\n        .app-table-column {\r\n            &__item {\r\n                border-color: #cccccc;\r\n            }\r\n        }\r\n    }\r\n\r\n    .left-fixed {\r\n        position: sticky;\r\n        z-index: 1;\r\n        left: 0;\r\n        background-color: #ffffff;\r\n    }\r\n\r\n    &__head {\r\n        display: inline-flex;\r\n        min-width: 100%;\r\n        white-space: nowrap;\r\n        &__item {\r\n            &:not(.left-fixed) {\r\n                flex: 1;\r\n            }\r\n            &:last-child > .app-table-column:last-child > .app-table-column__item:last-child {\r\n                border-right: none;\r\n            }\r\n\r\n            i.sortable {\r\n                display: inline-block;\r\n                width: 12px;\r\n                height: 12px;\r\n                background-repeat: no-repeat;\r\n                background-size: contain;\r\n                background-position: center;\r\n                background-image: url(../../assets/images/icon-sortable.png);\r\n                &.up {\r\n                    background-image: url(../../assets/images/icon-sortup.png);\r\n                }\r\n                &.down {\r\n                    background-image: url(../../assets/images/icon-sortdown.png);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    &__body__row {\r\n        display: inline-flex;\r\n        min-width: 100%;\r\n        white-space: nowrap;\r\n        &__items {\r\n            &:not(.left-fixed) {\r\n                flex: 1;\r\n            }\r\n            &:last-child > .app-table-column:last-child > .app-table-column__item:last-child {\r\n                border-right: none;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n"]}]}