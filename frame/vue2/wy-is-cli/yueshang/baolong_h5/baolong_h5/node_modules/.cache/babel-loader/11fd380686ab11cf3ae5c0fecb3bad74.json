{"remainingRequest":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\babel-loader\\lib\\index.js!D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\wy\\my-project\\baolong_h5\\baolong_h5\\src\\components\\projectSelect\\projectList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\src\\components\\projectSelect\\projectList.vue","mtime":1611581655071},{"path":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\wy\\my-project\\baolong_h5\\baolong_h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovd3kvbXktcHJvamVjdC9iYW9sb25nX2g1L2Jhb2xvbmdfaDUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHByb2plY3RMaXN0OiBbXSwKICAgICAgaW5kZXhMaXN0OiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFByb2plY3RMaXN0OiBmdW5jdGlvbiBnZXRQcm9qZWN0TGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGRhdGEsIHByb2plY3RMaXN0LCByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGF0YSA9IFtdOwogICAgICAgICAgICAgICAgcHJvamVjdExpc3QgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgicHJvamVjdExpc3QiKSAmJiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJwcm9qZWN0TGlzdCIpKTsKCiAgICAgICAgICAgICAgICBpZiAoIShwcm9qZWN0TGlzdCAmJiBwcm9qZWN0TGlzdC5sZW5ndGggPiAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGF0YSA9IHByb2plY3RMaXN0OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRheGlvcy5nZXRQcm9qZWN0TGlzdCh7CiAgICAgICAgICAgICAgICAgIG9wZXJTdGF0dXM6IDIKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInByb2plY3RMaXN0IiwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpOyAvLyB0aGlzLiRzdG9yZS5jb21taXQoKCJwcm9qZWN0TGlzdCIsIGRhdGEpKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIF90aGlzLmdldFByb2plY3RMaXN0Rm9ybWF0KGRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldFByb2plY3RMaXN0Rm9ybWF0OiBmdW5jdGlvbiBnZXRQcm9qZWN0TGlzdEZvcm1hdChkYXRhKSB7CiAgICAgIHZhciByZXN1bHQgPSBbewogICAgICAgIGtleTogIiMiLAogICAgICAgIGNoaWxkcmVuOiBbewogICAgICAgICAgc2hvcnROYW1lOiAi5YWo6YOoIgogICAgICAgIH1dCiAgICAgIH1dOwogICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB2YXIga2V5ID0gaXRlbS5wcm9qZWN0U2hvcnROYW1lLnNsaWNlKDAsIDEpOwogICAgICAgIHZhciB0ZW1wID0gcmVzdWx0LmZpbmQoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIHJldHVybiB2LmtleSA9PT0ga2V5OwogICAgICAgIH0pOwoKICAgICAgICBpZiAodGVtcCkgewogICAgICAgICAgdGVtcC5jaGlsZHJlbi5wdXNoKGl0ZW0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQucHVzaCh7CiAgICAgICAgICAgIGtleToga2V5LAogICAgICAgICAgICBjaGlsZHJlbjogW2l0ZW1dCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmluZGV4TGlzdCA9IHJlc3VsdC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5rZXk7CiAgICAgIH0pOwogICAgICB0aGlzLnByb2plY3RMaXN0ID0gcmVzdWx0OwogICAgfSwKICAgIHByb2plU2VsZWN0ZWQ6IGZ1bmN0aW9uIHByb2plU2VsZWN0ZWQoaXRlbSkgewogICAgICB0aGlzLiRlbWl0KCJwcm9qZVNlbGVjdGVkIiwgaXRlbSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRQcm9qZWN0TGlzdCgpOwogIH0KfTs="},{"version":3,"sources":["projectList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAWA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,EADA;AAEA,MAAA,SAAA,EAAA;AAFA,KAAA;AAIA,GANA;AAOA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,IADA,GACA,EADA;AAEA,gBAAA,WAFA,GAEA,YAAA,CAAA,OAAA,CAAA,aAAA,KAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,aAAA,CAAA,CAFA;;AAAA,sBAGA,WAAA,IAAA,WAAA,CAAA,MAAA,GAAA,CAHA;AAAA;AAAA;AAAA;;AAIA,gBAAA,IAAA,GAAA,WAAA;AAJA;AAAA;;AAAA;AAAA;AAAA,uBAMA,KAAA,CAAA,MAAA,CAAA,cAAA,CAAA;AAAA,kBAAA,UAAA,EAAA;AAAA,iBAAA,CANA;;AAAA;AAMA,gBAAA,GANA;AAOA,gBAAA,IAAA,GAAA,GAAA,CAAA,IAAA;AACA,gBAAA,YAAA,CAAA,OAAA,CAAA,aAAA,EAAA,IAAA,CAAA,SAAA,CAAA,IAAA,CAAA,EARA,CASA;;AATA;AAYA,gBAAA,KAAA,CAAA,oBAAA,CAAA,IAAA;;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA,KAdA;AAeA,IAAA,oBAfA,gCAeA,IAfA,EAeA;AACA,UAAA,MAAA,GAAA,CACA;AACA,QAAA,GAAA,EAAA,GADA;AAEA,QAAA,QAAA,EAAA,CACA;AACA,UAAA,SAAA,EAAA;AADA,SADA;AAFA,OADA,CAAA;AAUA,MAAA,IAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,GAAA,GAAA,IAAA,CAAA,gBAAA,CAAA,KAAA,CAAA,CAAA,EAAA,CAAA,CAAA;AACA,YAAA,IAAA,GAAA,MAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AAAA,iBAAA,CAAA,CAAA,GAAA,KAAA,GAAA;AAAA,SAAA,CAAA;;AACA,YAAA,IAAA,EAAA;AACA,UAAA,IAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,SAFA,MAEA;AACA,UAAA,MAAA,CAAA,IAAA,CAAA;AACA,YAAA,GAAA,EAAA,GADA;AAEA,YAAA,QAAA,EAAA,CAAA,IAAA;AAFA,WAAA;AAIA;AACA,OAXA;AAYA,WAAA,SAAA,GAAA,MAAA,CAAA,GAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,GAAA;AAAA,OAAA,CAAA;AACA,WAAA,WAAA,GAAA,MAAA;AACA,KAxCA;AAyCA,IAAA,aAzCA,yBAyCA,IAzCA,EAyCA;AACA,WAAA,KAAA,CAAA,eAAA,EAAA,IAAA;AACA;AA3CA,GAPA;AAoDA,EAAA,OApDA,qBAoDA;AACA,SAAA,cAAA;AACA;AAtDA,CAAA","sourcesContent":["<template>\r\n\t<div class=\"project-list\">\r\n\t\t<van-index-bar :index-list=\"indexList\" highlight-color=\"#3a96bd\">\r\n\t\t\t<div v-for=\"item in projectList\" :key=\"item.key\">\r\n\t\t\t\t<van-index-anchor :index=\"item.key\">{{ item.key }}</van-index-anchor>\r\n\t\t\t\t<van-cell :title=\"child.shortName\" v-for=\"child in item.children\" :key=\"child.bisProjectId\" @click=\"projeSelected(child)\"> </van-cell>\r\n\t\t\t</div>\r\n\t\t</van-index-bar>\r\n\t</div>\r\n</template>\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tprojectList: [],\r\n\t\t\tindexList: [],\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\tasync getProjectList() {\r\n\t\t\tlet data = [];\r\n\t\t\tlet projectList = localStorage.getItem(\"projectList\") && JSON.parse(localStorage.getItem(\"projectList\"));\r\n\t\t\tif (projectList && projectList.length > 0) {\r\n\t\t\t\tdata = projectList;\r\n\t\t\t} else {\r\n\t\t\t\tlet res = await this.$axios.getProjectList({ operStatus: 2 });\r\n\t\t\t\tdata = res.data;\r\n\t\t\t\tlocalStorage.setItem(\"projectList\", JSON.stringify(data));\r\n\t\t\t\t// this.$store.commit((\"projectList\", data));\r\n\t\t\t}\r\n\r\n\t\t\tthis.getProjectListFormat(data);\r\n\t\t},\r\n\t\tgetProjectListFormat(data) {\r\n\t\t\tlet result = [\r\n\t\t\t\t{\r\n\t\t\t\t\tkey: \"#\",\r\n\t\t\t\t\tchildren: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tshortName: \"全部\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t];\r\n\t\t\tdata.forEach((item) => {\r\n\t\t\t\tlet key = item.projectShortName.slice(0, 1);\r\n\t\t\t\tlet temp = result.find((v) => v.key === key);\r\n\t\t\t\tif (temp) {\r\n\t\t\t\t\ttemp.children.push(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\tkey: key,\r\n\t\t\t\t\t\tchildren: [item],\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.indexList = result.map((item) => item.key);\r\n\t\t\tthis.projectList = result;\r\n\t\t},\r\n\t\tprojeSelected(item) {\r\n\t\t\tthis.$emit(\"projeSelected\", item);\r\n\t\t},\r\n\t},\r\n\tmounted() {\r\n\t\tthis.getProjectList();\r\n\t},\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.project-list {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\toverflow: auto;\r\n\tbackground-color: #fff;\r\n\tcolor: #333;\r\n}\r\n/deep/.van-index-anchor {\r\n\twidth: 100%;\r\n\theight: 46px;\r\n\tline-height: 46px;\r\n\tfont-size: 16px;\r\n\tfont-weight: bold;\r\n\tpadding: 0 10px;\r\n\tborder-bottom: 1px solid #e5e5e5;\r\n\tbackground: #eee;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/projectSelect"}]}