{"version":3,"sources":["uni-app:///main.js","webpack:////Users/company/ys/2gitPro/bl/pms-h5-web/operating/pages/kaiye/index.vue?9e93","webpack:////Users/company/ys/2gitPro/bl/pms-h5-web/operating/pages/kaiye/index.vue?819e","webpack:////Users/company/ys/2gitPro/bl/pms-h5-web/operating/pages/kaiye/index.vue?b929","webpack:////Users/company/ys/2gitPro/bl/pms-h5-web/operating/pages/kaiye/index.vue?97fc","uni-app:///pages/kaiye/index.vue","webpack:////Users/company/ys/2gitPro/bl/pms-h5-web/operating/pages/kaiye/index.vue?6dd3","webpack:////Users/company/ys/2gitPro/bl/pms-h5-web/operating/pages/kaiye/index.vue?0443"],"names":["createPage","Page"],"mappings":"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","file":"pages/kaiye/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/kaiye/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=45565df9&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/kaiye/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=45565df9&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n<view class=\"kaiye-index\">\r\n  <app-header @tab-changed=\"onTabChanged\">\r\n    <view v-if=\"recovery.show\">\r\n      纠错编辑\r\n    </view>\r\n    <!-- <app-project-selector bindselected=\"onProjectSelected\" /> -->\r\n    <view slot=\"right\" v-if=\"!recovery.show\">\r\n      <app-picker :fromDate=\"params.yearMonthDay\" fields=\"day\" @changed=\"onDateChanged\"></app-picker>\r\n    </view>\r\n    <view slot=\"right\" style=\"margin-left: 20rpx\" v-if=\"!recovery.show\">\r\n      <app-filter-dialog :groups=\"groups\" @selected=\"bindselected\" title=\"筛选\"></app-filter-dialog>\r\n    </view>\r\n    <view slot=\"right\" style=\"margin-left: 20rpx;\" v-if=\"!recovery.show\">\r\n      <view class=\"flex\" @tap=\"onRecoveryClick\">\r\n        纠错\r\n        <image src=\"/static/assets/images/icon-find-recovery.png\" style=\"width:32rpx;height:32rpx;margin-left:10rpx;\"></image>\r\n      </view>\r\n    </view>\r\n  </app-header>\r\n  <!-- <view class=\"updata-time\">\r\n    数据更新时间：2020-04-10 数据来源系统：PMS系统</view> -->\r\n  <app-section title=\"开业率(%)\" collapseable v-if=\"!recovery.show\">\r\n    <app-echarts :options=\"page.charts.main.options\"></app-echarts>\r\n  </app-section>\r\n\r\n  <view class=\"paiming\">\r\n    <app-section title=\"项目排名\">\r\n      <app-table :fixednum=\"2\" :values=\"dataList\" :columns=\"columns\" :totalRow=\"totalRow\" :selected=\"tableSelected\" @row-column-click=\"onRowColumnClick\"></app-table>\r\n    </app-section>\r\n  </view>\r\n\r\n  <!-- <view class=\"btm-btn\" bind:tap=\"skip\" wx:if=\"{{ !recovery.show }}\">招商计划</view> -->\r\n  <view class=\"recovery-actions\" v-if=\"recovery.show\">\r\n    <view class=\"recovery-actions__action\" @tap=\"cancelRecovery\">取消</view>\r\n    <view class=\"recovery-actions__action recovery-actions__action--priamry\" @tap=\"postRecovery\">提交</view>\r\n  </view>\r\n</view>\r\n</template>\r\n\r\n<script>\r\nconst app = getApp();\r\nimport regeneratorRuntime from \"@/utils/runtime\";\r\nconst columns = [{\r\n  label: \"序号\",\r\n  width: \"90rpx\"\r\n}, {\r\n  label: \"项目\",\r\n  key: \"shortName\",\r\n  color: \"#3992BA\",\r\n  width: \"200rpx\",\r\n  align: \"left\"\r\n}, {\r\n  label: \"计租面积(㎡)\",\r\n  key: \"allSquare\",\r\n  sortable: true,\r\n  align: \"right\",\r\n  width: \"220rpx\"\r\n}, {\r\n  label: \"空铺面积(㎡)\",\r\n  key: \"emptySquare\",\r\n  color: \"#3992BA\",\r\n  sortable: true,\r\n  align: \"right\",\r\n  width: \"200rpx\"\r\n}, {\r\n  label: \"出租率\",\r\n  key: \"rentRate\",\r\n  width: \"160rpx\",\r\n  sortable: true,\r\n  align: \"right\"\r\n}, {\r\n  label: \"开业率\",\r\n  key: \"openRate\",\r\n  width: \"160rpx\",\r\n  sortable: true,\r\n  align: \"right\"\r\n}, {\r\n  label: \"开业率指标\",\r\n  key: \"indexSquare\",\r\n  width: \"180rpx\",\r\n  sortable: true,\r\n  align: \"right\"\r\n}, {\r\n  label: \"达成率\",\r\n  key: \"indexRate\",\r\n  width: \"160rpx\",\r\n  sortable: true,\r\n  align: \"right\"\r\n}];\r\nimport appSection from \"@/components/container/section\";\r\nimport appTable from \"@/components/table/index\";\r\nimport appFilterDialog from \"@/components/filter/dialog\";\r\nimport appProjectSelector from \"@/components/selector/project\";\r\nimport appPicker from \"@/components/selector/datepicker\";\r\nimport appHeader from \"@/components/common/header\";\r\nimport appEcharts from \"@/components/echarts/echarts\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      recovery: {\r\n        show: false,\r\n        selected: {},\r\n        current: {}\r\n      },\r\n      selected: {},\r\n      current: {},\r\n      tableSelected: {\r\n        key: \"bisProjectId\",\r\n        keysMap: {}\r\n      },\r\n      keysMap: {},\r\n      params: {\r\n        storeType: \"\",\r\n        squareFlag: \"\",\r\n        stage: \"\",\r\n        operateArea: \"\",\r\n        provinceCd: \"\",\r\n        queryBeginDate: \"\",\r\n        queryEndDate: \"\",\r\n        yearMonthDay: app.globalData.getDefaultDate(\"yesterday\")\r\n      },\r\n      page: {\r\n        table: {\r\n          mode: \"month\"\r\n        },\n\t\tcharts: {\n\t\t\tmain: {}\n\t\t}\r\n      },\r\n      table: {\r\n        mode: \"month\"\r\n      },\r\n      columns,\r\n      groups: [],\r\n      dataList: [],\r\n      //数据列表\r\n      totalRow: null //合计数据\r\n\r\n    };\r\n  },\r\n\r\n  components: {\r\n    appSection,\r\n    appTable,\r\n    appFilterDialog,\r\n    appProjectSelector,\r\n    appPicker,\r\n    appHeader,\r\n    appEcharts\r\n  },\r\n  props: {},\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\n\tlet begDate = \"\";\r\n\r\n    if (options.yearMonth) {\r\n      let year = options.yearMonth.split(\"-\")[0];\r\n      let month = options.yearMonth.split(\"-\")[1];\r\n      begDate = year - 1 + \"-\" + month;\r\n    }\r\n\r\n    this.setData({\r\n      [\"params.queryBeginDate\"]: begDate,\r\n      [\"params.queryEndDate\"]: options.yearMonth,\r\n      [\"params.storeType\"]: options.storeType\r\n    }); // this.getNowDate()\r\n\r\n    this.loadData();\r\n    this.getStoreType(); // this.getplanList()\r\n  },\r\n  methods: {\r\n    yearMonthDay() {\n\t\treturn app.globalData.getDefaultDate(\"yesterday\")\n\t},\r\n\r\n    getNowDate() {\r\n      let date = new Date();\r\n      let queryBeginDate = date.getFullYear() - 1 + \"-\" + (date.getMonth() + 1);\r\n      let queryEndDate = date.getFullYear() + \"-\" + (date.getMonth() + 1);\r\n      this.setData({\r\n        [\"params.queryBeginDate\"]: queryBeginDate,\r\n        [\"params.queryEndDate\"]: queryEndDate\r\n      });\r\n    },\r\n\r\n    getYear(year) {\r\n      if (year) {\r\n        return year.split(\"-\")[0];\r\n      }\r\n    },\r\n\r\n    async loadData() {\r\n      const {\r\n        data: {\r\n          chartData,\r\n          ...res\r\n        }\r\n      } = await app.globalData.request.options({\r\n        loading: true\r\n      }).get(\"/open/bis-open-report!kyTotal.action\", this.params);\r\n      let year = this.getYear(this.params.queryEndDate);\r\n      let prevYear = this.getYear(this.params.queryBeginDate);\r\n      if(year) {\n\t\t  year = year.substring(year.length - 2);\n\t  }\r\n      prevYear = prevYear.substring(prevYear.length - 2);\r\n      const setdata = {\r\n        \"page.charts.main.options\": {\r\n          legend: {\r\n            data: [year + \"年度\", prevYear + \"年度\"],\r\n            icon: \"circle\",\r\n            itemHeight: 7\r\n          },\r\n          unit: \"%\",\r\n          xAxis: {\r\n            type: \"category\",\r\n            data: [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\", \"9月\", \"10月\", \"11月\", \"12月\"],\r\n            splitLine: {\r\n              show: true,\r\n              lineStyle: {\r\n                color: \"#C9CCDA\",\r\n                type: \"dashed\"\r\n              }\r\n            }\r\n          },\r\n          yAxis: {\r\n            type: \"value\"\r\n          },\r\n          series: [{\r\n            type: \"line\",\r\n            name: year + \"年度\",\r\n            data: JSON.parse(res.initChar.openRateChar).map(num => num),\r\n            areaStyle: {\r\n              color: new this.$echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                offset: 0,\r\n                color: \"#CFDFFE\"\r\n              }, {\r\n                offset: 1,\r\n                color: \"#FFFFFF\"\r\n              }])\r\n            }\r\n          }, {\r\n            type: \"line\",\r\n            name: prevYear + \"年度\",\r\n            data: JSON.parse(res.initChar.openPrevRateChar).map(num => num)\r\n          }]\r\n        }\r\n      };\r\n      const {\r\n        params\r\n      } = this;\r\n      await app.globalData.request.options({\r\n        loading: true\r\n      }).get(\"/open/bis-open-mark-info!findPageMarkInfoList.action\", { ...params,\r\n        pageType: \"kyl\",\r\n        bizProjectId: \"\",\r\n        pageSource: getCurrentPages().pop().route\r\n      }).then(res => {\r\n        const keysMap = res.data.reduce((result, item) => {\r\n          result[item.markX] = item.markY.split(\",\");\r\n          return result;\r\n        }, {});\r\n        setdata[\"recovery.selected\"] = keysMap;\r\n        setdata[\"tableSelected.keysMap\"] = keysMap;\r\n      });\r\n      this.setData(setdata);\r\n\r\n      if (res.list.length) {\r\n        this.setData({\r\n          dataList: res.list.slice(0, -1).map((item, index) => {\r\n            return { ...item,\r\n              ranking: index + 1\r\n            };\r\n          }),\r\n          totalRow: res.list.slice(-1)[0]\r\n        });\r\n      } else {\r\n        this.setData({\r\n          dataList: [],\r\n          totalRow: null\r\n        });\r\n      }\r\n    },\r\n\r\n    //选择筛选日期\r\n    onDateChanged(e) {\r\n      let from = e.detail.value;\r\n      this.setData({\r\n        [\"params.queryBeginDate\"]: this.getYear(from) - 1 + \"-\" + from.split(\"-\")[1],\r\n        [\"params.queryEndDate\"]: from.split(\"-\").slice(0, -1).join(\"-\"),\r\n        [\"params.yearMonthDay\"]: from\r\n      });\r\n      this.loadData();\r\n    },\r\n\r\n    // 点击行查看详情跳转 更改为 点击单项跳转详情或者空铺信息\r\n    onRowColumnClick(e) {\r\n      console.log(e); //判断当点击空铺面积时跳转\r\n\r\n      if (e.detail.column.key == \"emptySquare\") {\r\n        let bisProjectId = e.detail.row.bisProjectId;\r\n        let projectName = e.detail.row.shortName;\r\n        uni.navigateTo({\r\n          url: `./kongpu/kongpu?bisProjectId=${bisProjectId}&projectName=${projectName}&yearMonth=${this.params.queryEndDate}&storeType=${this.params.storeType}`\r\n        });\r\n      } else {\r\n        const {\r\n          show,\r\n          selected\r\n        } = this.recovery;\r\n\r\n        if (show) {\r\n          const {\r\n            row,\r\n            column\r\n          } = e.detail;\r\n          const rowKey = this.tableSelected.key;\r\n\r\n          if (!selected[row[rowKey]]) {\r\n            selected[row[rowKey]] = [];\r\n          }\r\n\r\n          if (selected[row[rowKey]].includes(column.key)) {\r\n            selected[row[rowKey]].splice(selected[row[rowKey]].indexOf(column.key), 1);\r\n          } else {\r\n            selected[row[rowKey]].push(column.key);\r\n          }\r\n\r\n          this.setData({\r\n            \"tableSelected.keysMap\": selected\r\n          });\r\n          return;\r\n        }\r\n\r\n        let bisProjectId = e.detail.row.bisProjectId;\r\n        let projectName = e.detail.row.shortName;\r\n        uni.navigateTo({\r\n          url: `./details/details?bisProjectId=${bisProjectId}&projectName=${projectName}&yearMonth=${this.params.queryEndDate}&storeType=${this.params.storeType}`\r\n        });\r\n      }\r\n    },\r\n\r\n    // 获取搜索物业类型枚举\r\n    async getStoreType() {\r\n      let res = await app.globalData.request.options({\r\n        loading: true\r\n      }).get(\"/open/bis-open-dict!chargeTypeList.action\");\r\n      let result = res.data.map(item => {\r\n        return {\r\n          label: item.name,\r\n          value: \"storeType-\" + item.code,\r\n          selected: item.code === this.params.storeType\r\n        };\r\n      });\r\n      let group = {\r\n        label: \"物业类型\",\r\n        items: result,\r\n        maxnum: 1\r\n      };\r\n      let groups = this.groups;\r\n      groups.push(group);\r\n      this.setData({\r\n        groups\r\n      });\r\n    },\r\n\r\n    // 获取区域枚举\r\n    async getplanList() {\r\n      let res = await app.globalData.request.options({\r\n        loading: true\r\n      }).get(\"/open/bis-open-report!zsPlanListPage.action\", this.params);\r\n      let groups = this.groups;\r\n\r\n      for (let i = 0; i < groups.length; i++) {\r\n        if (groups[i].label == \"项目区域\" || groups[i].label == \"省份\") {\r\n          groups.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n\r\n      let area = res.data.operateAreaList.map(item => {\r\n        return {\r\n          label: item.operateArea,\r\n          value: \"operateArea-\" + item.index\r\n        };\r\n      });\r\n      let provice = res.data.proviceList.map(item => {\r\n        return {\r\n          label: item.province,\r\n          value: \"provinceCd-\" + item.index\r\n        };\r\n      });\r\n      area.unshift({\r\n        label: \"全部\",\r\n        value: \"operateArea-\" + \"\"\r\n      });\r\n      provice.unshift({\r\n        label: \"全部\",\r\n        value: \"provinceCd-\" + \"\"\r\n      });\r\n      let area_group = {\r\n        label: \"项目区域\",\r\n        items: area,\r\n        maxnum: 1\r\n      };\r\n      let provice_group = {\r\n        label: \"省份\",\r\n        items: provice,\r\n        maxnum: 1\r\n      };\r\n      groups.push(area_group, provice_group);\r\n      this.setData({\r\n        groups\r\n      });\r\n    },\r\n\r\n    //筛选框选择数据\r\n    bindselected(e) {\r\n      let arr = e.detail;\r\n      let detais = {};\r\n      arr.map((item, index) => {\r\n        let key = item.split(\"-\")[0];\r\n        let val = item.split(\"-\")[1];\r\n        detais[key] = val;\r\n      });\r\n\r\n      for (const key in detais) {\r\n        this.setData({\r\n          [`params.${key}`]: detais[key]\r\n        });\r\n      }\r\n\r\n      this.loadData();\r\n    },\r\n\r\n    onRecoveryClick() {\n      this.setData({\r\n        \"recovery.show\": true,\r\n        \"recovery.current\": JSON.parse(JSON.stringify(this.recovery.selected))\r\n      });\r\n    },\r\n\r\n    postRecovery() {\r\n      const {\r\n        storeType\r\n      } = this.params;\r\n      const selectedMap = this.recovery.selected;\r\n      const markInfos = Object.keys(selectedMap).filter(key => selectedMap[key].length).map(key => {\r\n        return {\r\n          markX: key,\r\n          markY: selectedMap[key].join(\",\"),\r\n          notes: \"\"\r\n        };\r\n      });\r\n      app.globalData.request.options({\r\n        loading: true\r\n      }).post(\"/open/bis-open-mark-info!clearAndSavePageMarkInfoList.action\", {\r\n        bisProjectId: \"\",\r\n        storeType,\r\n        markInfos,\r\n        pageType: \"kyl\",\r\n        pageSource: getCurrentPages().pop().route\r\n      }).then(() => {\r\n        this.cancelRecovery(false);\r\n      });\r\n    },\r\n\r\n    cancelRecovery(reset = true) {\r\n      const setdata = {\r\n        \"recovery.show\": false,\r\n        \"recovery.selected\": this.tableSelected.keysMap\r\n      };\r\n\r\n      if (reset !== false) {\r\n        setdata[\"recovery.selected\"] = this.recovery.current;\r\n        setdata[\"tableSelected.keysMap\"] = this.recovery.current;\r\n      }\r\n\r\n      this.setData(setdata);\n\t  this.loadData();\n\t  this.getStoreType(); // this.getplanList()\r\n    },\r\n\r\n    // 跳转\r\n    skip() {\r\n      app.globalData.page.go(\"../zhaoshang/index\", {\r\n        yearMonth: this.params.queryEndDate,\r\n        storeType: this.params.storeType\r\n      });\r\n    }\r\n\r\n  }\r\n};\r\n</script>\r\n<style>\r\n@import \"./index.css\";\r\n</style>","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1611196582100\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}