(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-xiaoshou-paiming-paiming"],{"01cb":function(t,e,a){"use strict";a.r(e);var o=a("12d8"),l=a("6965");for(var i in l)"default"!==i&&function(t){a.d(e,t,(function(){return l[t]}))}(i);a("2d22");var n,r=a("f0c5"),s=Object(r["a"])(l["default"],o["b"],o["c"],!1,null,"289325e6",null,!1,o["a"],n);e["default"]=s.exports},"12d8":function(t,e,a){"use strict";var o;a.d(e,"b",(function(){return l})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return o}));var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("app-header",[a("v-uni-view",{staticStyle:{display:"flex"},attrs:{slot:"right"},slot:"right"},[a("app-date-picker",{attrs:{fromDate:t.queryModel.yearMonth,fields:"month"},on:{changed:function(e){arguments[0]=e=t.$handleEvent(e),t.onDateChanged.apply(void 0,arguments)}}}),a("app-filter-dialog",{staticStyle:{"margin-left":"32rpx"},attrs:{groups:t.groups,title:"筛选"},on:{selected:function(e){arguments[0]=e=t.$handleEvent(e),t.onSelectedChange.apply(void 0,arguments)},open:function(e){arguments[0]=e=t.$handleEvent(e),t.bindopen.apply(void 0,arguments)},close:function(e){arguments[0]=e=t.$handleEvent(e),t.bindclose.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"wrapper"},[t.show?a("app-section",{attrs:{title:t.chartsTitle,collapseable:t.collapseable}},[a("v-uni-view",{staticClass:"head-actions_left_view",attrs:{slot:"head-actions_left"},slot:"head-actions_left"},[a("app-filter-chartdialog",{attrs:{items:t.items},on:{chartselected:function(e){arguments[0]=e=t.$handleEvent(e),t.onChartSelectedChange.apply(void 0,arguments)}}})],1),a("app-echarts",{attrs:{height:"400rpx",options:t.lineops}})],1):t._e()],1),a("v-uni-view",{staticClass:"wrapper",staticStyle:{"margin-top":"12rpx"}},[a("app-section",{attrs:{title:"项目排名"}},[a("v-uni-view",{attrs:{slot:"head-actions"},slot:"head-actions"},[a("v-uni-view",{staticClass:"list-mode"},[a("v-uni-text",{class:"list-mode-item "+("day"===t.table.mode?"active":""),attrs:{"data-value":"day"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onListModeChanged.apply(void 0,arguments)}}},[t._v("昨日")]),t._v("｜"),a("v-uni-text",{class:"list-mode-item "+("month"===t.table.mode?"active":""),attrs:{"data-value":"month"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onListModeChanged.apply(void 0,arguments)}}},[t._v("当月")]),t._v("｜"),a("v-uni-text",{class:"list-mode-item "+("year"===t.table.mode?"active":""),attrs:{"data-value":"year"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onListModeChanged.apply(void 0,arguments)}}},[t._v("年累计")])],1)],1),a("app-table",{attrs:{values:t.table.dataList,columns:t.table.columns,totalRow:t.table.totalRow,fixednum:2},on:{"row-column-click":function(e){arguments[0]=e=t.$handleEvent(e),t.onRowColumnClick.apply(void 0,arguments)}}})],1)],1)],1)},i=[]},"2d22":function(t,e,a){"use strict";var o=a("f2f9"),l=a.n(o);l.a},"43a7":function(t,e,a){var o=a("24fb");e=o(!1),e.push([t.i,"/* pages/xiaoshou/paiming/paiming.wxss */.wrapper[data-v-289325e6]{background-color:#fff}.list-mode-item[data-v-289325e6]{font-size:%?28?%}.list-mode-item.active[data-v-289325e6]{color:#3992ba;font-size:%?32?%;font-weight:700}.head-actions_left_view[data-v-289325e6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.head-actions_left[data-v-289325e6]{width:%?26?%;height:%?14?%}",""]),t.exports=e},"531d":function(t,e,a){"use strict";var o=a("4ea4");a("4160"),a("d81d"),a("fb6a"),a("ac1f"),a("1276"),a("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=o(a("5530"));a("96cf3");var i=o(a("1da1")),n=o(a("ade3")),r=o(a("bbb7")),s=o(a("86dc")),d=o(a("f8fa")),h=o(a("1b7d")),p=o(a("6c6be")),c=o(a("0fa9")),u=o(a("38ee")),b=o(a("5d16")),f=o(a("a635")),y=getApp(),v=[{label:"序号",width:"90rpx",fixed:!0},{label:"项目",key:"projectName",color:"#3B96BE",width:"180",align:"left",fixed:!0},{label:"平效",key:"px",sortable:!0,width:"140",align:"right"},{label:"同比",key:"pxTb",sortable:!0,width:"140",align:"right"},{label:"租售比",key:"zsb",sortable:!0,width:"140",align:"right"},{label:"同比",key:"zsbTb",sortable:!0,width:"140",align:"right"},{label:"销售额(万元)",key:"monthSales",sortable:!0,width:"200",align:"right"},{label:"同比",key:"mtm",width:"130",sortable:!0,align:"right"},{label:"环比",key:"hb",width:"130",sortable:!0,align:"right"}],m=[{label:"序号",width:"90rpx"},{label:"项目",key:"projectName",color:"#3B96BE",width:"180",align:"left"},{label:"平均月平效",key:"avgMonthPx",sortable:!0,width:"200",align:"right"},{label:"销售额(万元)",key:"yearSales",sortable:!0,width:"200",align:"right"},{label:"同比",key:"yty",width:"130",sortable:!0,align:"right"}],g=[{label:"序号",width:"90rpx"},{label:"项目",key:"name",color:"#3B96BE",width:"180",align:"left"},{label:"销售额(万元)",key:"yesterDaySales",sortable:!0,width:"200",align:"right"},{label:"环比",key:"hb",width:"130",sortable:!0,align:"right"},{label:"达成率",key:"dcl",width:"130",sortable:!0,align:"right"}],w={data:function(){var t;return t={show:!0,chartsTitle:"平效(元/m²)",queryModel:{operateArea:"",provinceCd:"",yearMonth:null,storeType:"",stage:""},updateTime:null,collapseable:!0,pxCharData:[],pxPrevYearCharData:[],monthSalesChart:[],prevMonthSalesChart:[],zsbChart:[],prevZsbChart:[],lineops:{decimals:"xiaoshoupaiming",unit:"元/㎡",xAxis:{type:"category",boundaryGap:!1,data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},yAxis:{type:"value",boundaryGap:!1},series:[{type:"line",lineStyle:{color:"#3AABFF"},areaStyle:{color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#2D9FCB"},{offset:1,color:"rgba(255,255,255,0.48)"}])}},{type:"line",lineStyle:{color:"#9BB3C6"}}]},xAxis:{type:"category",boundaryGap:!1,data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},yAxis:{type:"value",boundaryGap:!1},lineStyle:{color:"#3AABFF"},areaStyle:{color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#2D9FCB"},{offset:1,color:"rgba(255,255,255,0.48)"}])}},(0,n.default)(t,"lineStyle",{color:"#9BB3C6"}),(0,n.default)(t,"table",{mode:"month",columns:v,totalRow:null,dataList:[]}),(0,n.default)(t,"mTotalRow",null),(0,n.default)(t,"yTotalRow",null),(0,n.default)(t,"dTotalRow",null),(0,n.default)(t,"monthData",[]),(0,n.default)(t,"yearData",[]),(0,n.default)(t,"dayData",[]),(0,n.default)(t,"groups",[]),(0,n.default)(t,"items",[{title:"平效",value:"px",unit:"元/m²"},{title:"销售额",value:"xse",unit:"万元"},{title:"租售比",value:"zsb",unit:"万元"}]),t},components:{appHeader:s.default,appProjectSelector:d.default,appSection:h.default,appEcharts:p.default,appTable:c.default,appFilterDialog:u.default,appDatePicker:b.default,appFilterChartdialog:f.default},props:{},onLoad:function(t){console.log("options==",t),this.setData({"queryModel.yearMonth":t.yearMonth,"queryModel.storeType":t.storeType}),this.queryData(),this.getStoreType()},methods:{getStoreType:function(){var t=this;return(0,i.default)(r.default.mark((function e(){var a,o,l,i;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.globalData.request.options({loading:!0}).get("/open/bis-open-dict!chargeTypeList.action");case 2:a=e.sent,o=a.data.map((function(e){return{label:e.name,value:"storeType-"+e.code,selected:e.code===t.queryModel.storeType}})),l={label:"物业类型",items:o,maxnum:1},i=t.groups,i.push(l),t.setData({groups:i});case 8:case"end":return e.stop()}}),e)})))()},onProjectSelected:function(t){var e="";"全部"!==t.detail.label&&(e=t.detail.label),this.setData({"queryModel.provinceCd":e}),this.queryData()},onDateChanged:function(t){this.setData({"queryModel.yearMonth":t.detail.value}),this.queryData()},onChartSelectedChange:function(t){var e=this,a=[],o=[],l="",i="";this.items.forEach((function(n){if(n.value===t.detail.value){"px"===n.value&&(a=e.pxCharData,o=e.pxPrevYearCharData,l="xiaoshoupaiming",i="元/㎡"),"xse"===n.value&&(a=e.monthSalesChart,o=e.prevMonthSalesChart,l="paiming",i=""),"zsb"===n.value&&(a=e.zsbChart,o=e.prevZsbChart,l="",i="%");var r={chartsTitle:t.detail.title+"("+t.detail.unit+")","lineops.decimals":l,"lineops.unit":i,"lineops.series[0].data":a,"lineops.series[1].data":o};e.setData(r)}}))},bindopen:function(){this.setData({show:!1})},bindclose:function(){this.setData({show:!0})},onSelectedChange:function(t){var e=t.detail;if(0===e.length)this.setData({queryModel:{provinceCd:"",yearMonth:this.queryModel.yearMonth,storeType:"",stage:""}});else{var a={};for(var o in e.forEach((function(t){var e=t.split("-")[0],o=t.split("-")[1];a[e]=o})),a)this.setData((0,n.default)({},"queryModel.".concat(o),a[o]))}this.queryData()},onListModeChanged:function(t){var e=t.target.dataset.value;this.table.mode!==e&&("month"===e?this.setData({"table.mode":e,"table.columns":v,"table.totalRow":this.mTotalRow,"table.dataList":this.monthData}):"year"===e?this.setData({"table.mode":e,"table.columns":m,"table.totalRow":this.yTotalRow,"table.dataList":this.yearData}):this.setData({"table.mode":e,"table.columns":g,"table.totalRow":this.dTotalRow,"table.dataList":this.dayData}))},onActionsLeftCatch:function(t){console.log("onActionsLeftCatch")},onRowColumnClick:function(t){y.globalData.page.go("../month/month",{bisProjectId:t.detail.row.bisProjectId,projectName:t.detail.row.projectName,yearMonth:this.queryModel.yearMonth,storeType:this.queryModel.storeType})},queryData:function(){var t=this;y.globalData.request.options({loading:!0}).get("/open/bis-open-project!salesOfMonOrYear.action",this.queryModel).then((function(e){for(var a=e.data,o=a.initChar,i=a.initPrevYearChar,n=t.queryModel.yearMonth.split("-")[0],r=t.table.mode,s=[(n+"").substring(2)+"年度",(n-1+"").substring(2)+"年度"],d=a.salesMonth,h=[],p=[],c=e.data.salesDay.slice(1).map((function(t){return(0,l.default)((0,l.default)({},t),{},{bisProjectId:t.id,projectName:t.name})})),u=e.data.salesDay.slice(0,1)[0],b=[],f=null,y=null,v=null,m=0,g=d.length;m<g;m++){var w=d[m];0===m?(v={projectName:"合计",px:w.pxTot,pxTb:w.pxTbTot,zsb:w.zsbTot,zsbTb:w.zsbTbTot,monthSales:w.monthSalesTot,mtm:w.mtmTot,hb:w.hbTot},y={projectName:"合计",avgMonthPx:w.avgMonthPxTot,yearSales:w.yearSalesTot,yty:w.ytyTot}):(h.push({bisProjectId:w.bisProjectId,projectName:w.projectName,px:w.px,pxTb:w.pxTb,zsb:w.zsb,zsbTb:w.zsbTb,monthSales:w.monthSales,mtm:w.mtm,hb:w.hb}),p.push({bisProjectId:w.bisProjectId,projectName:w.projectName,avgMonthPx:w.avgMonthPx,yearSales:w.yearSales,yty:w.yty}))}"day"===r?(b=c,f=u):"month"===r?(f=v,b=h):(f=y,b=p),o.pxChart&&o.pxChart.length>3&&(t.pxCharData=JSON.parse(o.pxChart)),i.pxChart&&i.pxChart.length>3&&(t.pxPrevYearCharData=JSON.parse(i.pxChart)),t.monthSalesChart=JSON.parse(o.monthSalesChart),t.prevMonthSalesChart=JSON.parse(i.monthSalesChart),t.zsbChart=JSON.parse(o.zsbChart),t.prevZsbChart=JSON.parse(i.zsbChart),t.setData({"lineops.legend.data":s,"lineops.series[0].name":s[0],"lineops.series[0].data":t.pxCharData,"lineops.series[1].name":s[1],"lineops.series[1].data":t.pxPrevYearCharData,monthData:h,yearData:p,mTotalRow:v,yTotalRow:y,dTotalRow:u,dayData:c,"table.totalRow":f,"table.dataList":b})}))}}};e.default=w},6965:function(t,e,a){"use strict";a.r(e);var o=a("531d"),l=a.n(o);for(var i in o)"default"!==i&&function(t){a.d(e,t,(function(){return o[t]}))}(i);e["default"]=l.a},f2f9:function(t,e,a){var o=a("43a7");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var l=a("4f06").default;l("25a7b252",o,!0,{sourceMap:!1,shadowMode:!1})}}]);