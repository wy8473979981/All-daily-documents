(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-huiyuan-huiyuan"],{"12fd":function(e,t,a){"use strict";a.r(t);var n=a("3207"),i=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},"15fd":function(e,t,a){"use strict";a("a4d3"),a("c975"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var n=i(a("ccb5"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(null==e)return{};var a,i,r=(0,n.default)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)a=o[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}},1811:function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"app-datepicker"},[a("v-uni-picker",{attrs:{mode:"date",fields:e.fields,value:e.fromDate},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onFromDateChanged.apply(void 0,arguments)}}},[e._v(e._s(e.component.from||(e.range?"开始日期":"选择日期")))]),e.range?[a("v-uni-text",{staticClass:"app-datepicker-split"},[e._v("~")]),a("v-uni-picker",{attrs:{mode:"date",fields:e.fields,value:e.toDate},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onToDateChanged.apply(void 0,arguments)}}},[e._v(e._s(e.component.to||"结束日期"))])]:e._e(),a("v-uni-image",{staticClass:"app-datepicker-icon",attrs:{src:"/static/assets/images/icon-calendar.png"}})],2)},r=[]},"26a0":function(e,t,a){"use strict";var n=a("fedb"),i=a.n(n);i.a},"31dd":function(e,t,a){var n=a("695e");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("5e7a7e85",n,!0,{sourceMap:!1,shadowMode:!1})},3207:function(e,t,a){"use strict";var n=a("dbce"),i=a("4ea4");a("99af"),a("4160"),a("a15b"),a("d81d"),a("26e9"),a("b680"),a("b64b"),a("d3b7"),a("07ac"),a("ac1f"),a("25f0"),a("5319"),a("1276"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf3");var r=i(a("1da1")),o=i(a("ade3")),s=(n(a("d51b")),i(a("bbb7"))),l=i(a("6c6be")),u=i(a("1b7d")),c=i(a("86dc")),d=i(a("f8fa")),f=i(a("5d16")),p=getApp(),m={data:function(){var e;return e={global:"整体概况",globalData:[],currentRegisteredIndex:0,registeredTitles:[{name:"注册渠道占比"},{name:"会员性别占比"},{name:"会员等级占比"}]},(0,o.default)(e,"currentRegisteredIndex",0),(0,o.default)(e,"membersTitles",[{name:"新增会员占累计会员"},{name:"活跃会员占累计会员"},{name:"消费会员占累计会员"}]),(0,o.default)(e,"currentMembersIndex",0),(0,o.default)(e,"integralOutputTitles",[{name:"积分产出占比"},{name:"消费积分产出业态"},{name:"积分消耗占比"}]),(0,o.default)(e,"currentIntegralOutputIndex",0),(0,o.default)(e,"consumeMemberRatio",28.2),(0,o.default)(e,"activeMemberRatio",23),(0,o.default)(e,"newMemberRatio",84),(0,o.default)(e,"registeredChannels",{tooltip:{show:!0,trigger:"item",backgroundColor:"rgba(255,255,255,.7)",textStyle:{color:"#000000"},formatter:"{b}: {c} ({d}%)"},yAxis:{axisLine:{show:!1}},grid:{top:0,bottom:0,containLabel:!0},legend:{orient:"horizontal",x:"right",y:"bottom",icon:"circle",itemHeight:7},series:[{type:"pie",radius:["70%","80%"],avoidLabelOverlap:!1,top:20,bottom:20,label:{show:!0,position:"center",color:"#949596",fontSize:10,formatter:"{a}"},markArea:{silent:!1},labelLine:{show:!1}}]}),(0,o.default)(e,"tooltip",{show:!0,trigger:"item",backgroundColor:"rgba(255,255,255,.7)",textStyle:{color:"#000000"},formatter:"{b}: {c} ({d}%)"}),(0,o.default)(e,"yAxis",{axisLine:{show:!1}}),(0,o.default)(e,"grid",{top:0,bottom:0,containLabel:!0}),(0,o.default)(e,"legend",{orient:"horizontal",x:"right",y:"bottom",icon:"circle",itemHeight:7}),(0,o.default)(e,"label",{show:!0,position:"center",color:"#949596",fontSize:10,formatter:"{a}"}),(0,o.default)(e,"markArea",{silent:!1}),(0,o.default)(e,"labelLine",{show:!1}),(0,o.default)(e,"members",{yAxis:{axisLine:{show:!1}},grid:{top:0,bottom:0,containLabel:!0},legend:{show:!1},tooltip:{show:!1,trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"任务进度",type:"pie",radius:["70%","80%"],avoidLabelOverlap:!1,hoverAnimation:!1,labelLine:{normal:{show:!1}},data:[{name:"新增会员",itemStyle:{normal:{color:"#1CC2FF"}},selected:!1,label:{normal:{show:!0,position:"center",fontSize:12,color:"#333333",formatter:"{b}\n\n{d}%"}}},{selected:!1,itemStyle:{normal:{color:"#EAEAEA"}},label:{normal:{show:!1}}}]}]}),(0,o.default)(e,"yAxis",{axisLine:{show:!1}}),(0,o.default)(e,"grid",{top:0,bottom:0,containLabel:!0}),(0,o.default)(e,"legend",{show:!1}),(0,o.default)(e,"tooltip",{show:!1,trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"}),(0,o.default)(e,"labelLine",{normal:{show:!1}}),(0,o.default)(e,"data",[{name:"新增会员",itemStyle:{normal:{color:"#1CC2FF"}},selected:!1,label:{normal:{show:!0,position:"center",fontSize:12,color:"#333333",formatter:"{b}\n\n{d}%"}}},{selected:!1,itemStyle:{normal:{color:"#EAEAEA"}},label:{normal:{show:!1}}}]),(0,o.default)(e,"membersBar",{grid:{top:10,bottom:10,containLabel:!0},tooltip:{show:!0,trigger:"axis",backgroundColor:"rgba(255,255,255,.7)",textStyle:{color:"#000000"}},xAxis:{type:"value",boundaryGap:!0,splitLine:{show:!1},axisLine:{show:!1}},yAxis:{type:"category",boundaryGap:!0,splitLine:{show:!1},axisLine:{show:!1}},series:[{barMaxWidth:10,type:"bar"}]}),(0,o.default)(e,"grid",{top:10,bottom:10,containLabel:!0}),(0,o.default)(e,"tooltip",{show:!0,trigger:"axis",backgroundColor:"rgba(255,255,255,.7)",textStyle:{color:"#000000"}}),(0,o.default)(e,"xAxis",{type:"value",boundaryGap:!0,splitLine:{show:!1},axisLine:{show:!1}}),(0,o.default)(e,"yAxis",{type:"category",boundaryGap:!0,splitLine:{show:!1},axisLine:{show:!1}}),(0,o.default)(e,"integralOutput",{tooltip:{show:!0,trigger:"item",backgroundColor:"rgba(255,255,255,.7)",textStyle:{color:"#000000"},formatter:"{b}: {c} ({d}%)"},yAxis:{axisLine:{show:!1}},grid:{bottom:0,containLabel:!0},legend:{orient:"horizontal",x:"center",y:"bottom",icon:"circle",itemHeight:7},series:[{type:"pie",radius:["70%","80%"],avoidLabelOverlap:!1,bottom:40,label:{show:!0,position:"center",color:"#949596",fontSize:10,formatter:"{a}"},labelLine:{show:!1}}]}),(0,o.default)(e,"tooltip",{show:!0,trigger:"item",backgroundColor:"rgba(255,255,255,.7)",textStyle:{color:"#000000"},formatter:"{b}: {c} ({d}%)"}),(0,o.default)(e,"yAxis",{axisLine:{show:!1}}),(0,o.default)(e,"grid",{bottom:0,containLabel:!0}),(0,o.default)(e,"legend",{orient:"horizontal",x:"center",y:"bottom",icon:"circle",itemHeight:7}),(0,o.default)(e,"label",{show:!0,position:"center",color:"#949596",fontSize:10,formatter:"{a}"}),(0,o.default)(e,"labelLine",{show:!1}),(0,o.default)(e,"consumptionMod",{barWidth:15,color:"#399BFF",tooltip:{show:!0,trigger:"axis",backgroundColor:"rgba(255,255,255,.7)",textStyle:{color:"#000000"}},grid:{top:10,left:0,right:0,bottom:0,containLabel:!0},xAxis:{type:"category",boundaryGap:!0,splitLine:{show:!1},axisLine:{show:!1,lineStyle:{color:"#C9CCDA"}}},yAxis:{type:"value",splitLine:{show:!1},axisLine:{show:!1,lineStyle:{color:"#C9CCDA"}}},series:[{type:"bar",backgroundStyle:{color:"#399BFF"}}]}),(0,o.default)(e,"tooltip",{show:!0,trigger:"axis",backgroundColor:"rgba(255,255,255,.7)",textStyle:{color:"#000000"}}),(0,o.default)(e,"grid",{top:10,left:0,right:0,bottom:0,containLabel:!0}),(0,o.default)(e,"xAxis",{type:"category",boundaryGap:!0,splitLine:{show:!1},axisLine:{show:!1,lineStyle:{color:"#C9CCDA"}}}),(0,o.default)(e,"yAxis",{type:"value",splitLine:{show:!1},axisLine:{show:!1,lineStyle:{color:"#C9CCDA"}}}),(0,o.default)(e,"backgroundStyle",{color:"#399BFF"}),(0,o.default)(e,"params",{queryStartTime:"2020/01/01",queryEndTime:"2020/12/31"}),(0,o.default)(e,"fromDate","2020/11/01"),(0,o.default)(e,"toDate","2020/11/30"),(0,o.default)(e,"dataList",[]),(0,o.default)(e,"basicDateList",[]),(0,o.default)(e,"registerFrom",[]),(0,o.default)(e,"memberLevel",[]),(0,o.default)(e,"memberSex",[]),(0,o.default)(e,"pointsConsume",[]),(0,o.default)(e,"pointsGenerate",[]),(0,o.default)(e,"pointsGenerates",[{name:"转卡积分",key:"oldPoints"},{name:"游戏奖励",key:"gamePoints"},{name:"积分产出总数",key:"totalPoints"},{name:"权益赠送",key:"powerPoints"},{name:"消费积分",key:"consumePoints"},{name:"问卷奖励",key:"questionPoints"}]),(0,o.default)(e,"pointsConsumes",[{name:"活动消耗",key:"activePoints"},{name:"游戏消耗",key:"gamePoints"},{name:"商城消耗",key:"jPoints"},{name:"积分消耗总数",key:"totalPoints"},{name:"停车消耗",key:"parkingPoints"},{name:"共享设备消耗",key:"sharePoints"}]),(0,o.default)(e,"pointsCategory",[]),(0,o.default)(e,"projectName",""),(0,o.default)(e,"selected",""),e},components:{appEcharts:l.default,appSection:u.default,appHeader:c.default,appProjectSelector:d.default,appPicker:f.default},props:{},onLoad:function(e){var t,a=e.bisProjectId,n=e.projectName,i={label:n,value:a};this.setData((t={},(0,o.default)(t,"params.queryProjectId",e.bisProjectId),(0,o.default)(t,"projectName",e.projectName),(0,o.default)(t,"selected",i),t));var r=new Date;this.setData({"params.queryStartTime":this.startformatDate(r),"params.queryEndTime":this.endformatDate(r)}),this.getData()},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{getData:function(){var e=this;return(0,r.default)(s.default.mark((function t(){return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getbasicMemberData(),e.getChannels(),e.getHuiYuanPieData(),e.getHuiYuanData(),e.getJifenCanchu(),e.getConsumptionModData();case 6:case"end":return t.stop()}}),t)})))()},getConsumptionModData:function(){var e=this;return(0,r.default)(s.default.mark((function t(){var a,n,i,r,o;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p.globalData.request.options({loading:!0}).get("https://proservice.powerlong.com/pms/statistics/memberStatistics/consumeCategoryDistribution",e.params);case 2:a=t.sent,n=a.data.map((function(e){return e.name})),i=a.data.map((function(e){return e.value})),r=[],o={},o.data=i,o.type="bar",r.push(o),e.setData({"consumptionMod.xAxis.data":n,"consumptionMod.series":r});case 11:case"end":return t.stop()}}),t)})))()},getbasicMemberData:function(){var e=this;return(0,r.default)(s.default.mark((function t(){var a,n,i;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=[{title:"消费金额",key:"consumeMoneyNum",unit:"万元"},{title:"消费笔数",key:"consumeNum",unit:"笔"},{title:"累计会员数",key:"totalMemberNum",unit:"人"},{title:"消费会员数",key:"consumeMemberNum",unit:"人"},{title:"新增会员数",key:"registerMemberNum",unit:"人"},{title:"活跃会员数",key:"activeMemberNum",unit:"人"},{title:"客流",key:"flow",unit:"人"}],t.next=3,p.globalData.request.options({loading:!0}).get("https://proservice.powerlong.com/pms/statistics/memberStatistics/basicMemberData",e.params);case 3:n=t.sent,i=[],a.forEach((function(e,t){var a=0;a="万元"===e.unit?n.data[e.key]>0?(n.data[e.key]/1e6).toFixed(2):0:n.data[e.key],i.push({title:e.title,value:a,unit:e.unit})})),e.setData({globalData:i});case 7:case"end":return t.stop()}}),t)})))()},numFormat:function(e){e.toString().split(".");for(var t=e[0]&&e[0].split("").reverse()||"",a=[],n=0,i=t.length;n<i;n++)n%3===0&&0!==n&&a.push(","),a.push(t[n]);return a.reverse(),a=e[1]?a.join("").concat("."+e[1]):a.join(""),a},getHuiYuanPieData:function(){var e=this;return(0,r.default)(s.default.mark((function t(){var a;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p.globalData.request.options({loading:!0}).get("https://proservice.powerlong.com/pms/statistics/memberStatistics/memberFeature",e.params);case 2:a=t.sent,a.data.newMemberRatio?e.newMemberRatio=a.data.newMemberRatio:e.newMemberRatio=0,a.data.activeMemberRatio?e.activeMemberRatio=a.data.activeMemberRatio:e.activeMemberRatio=0,a.data.consumeMemberRatio?e.consumeMemberRatio=a.data.consumeMemberRatio:e.consumeMemberRatio=0,e.setData({"members.series[0].data[0].name":"新增会员","members.series[0].data[0].value":e.newMemberRatio,"members.series[0].data[1].value":100-e.newMemberRatio});case 7:case"end":return t.stop()}}),t)})))()},getHuiYuanPieClickData:function(){this.setData({"members.series[0].data[0].name":"新增会员","members.series[0].data[0].value":this.newMemberRatio,"members.series[0].data[1].value":100-this.newMemberRatio})},getHuiYuanPieActiveData:function(){this.setData({"members.series[0].data[0].name":"活跃会员","members.series[0].data[0].value":this.activeMemberRatio,"members.series[0].data[1].value":100-this.activeMemberRatio})},getHuiYuanPieConsumeData:function(){this.setData({"members.series[0].data[0].name":"消费会员","members.series[0].data[0].value":this.consumeMemberRatio,"members.series[0].data[1].value":100-this.consumeMemberRatio})},getHuiYuanData:function(){var e=this;return(0,r.default)(s.default.mark((function t(){var a,n,i,r,o;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p.globalData.request.options({loading:!0}).get("https://proservice.powerlong.com/pms/statistics/memberStatistics/memberAge",e.params);case 2:a=t.sent,n=a.data.map((function(e){return e.name})),i=a.data.map((function(e){return e.value})),r=[],o={},o.data=i,o.type="bar",r.push(o),e.setData({"membersBar.yAxis.data":n,"membersBar.series":r});case 11:case"end":return t.stop()}}),t)})))()},onProjectSelected:function(e){this.setData((0,o.default)({},"params.queryProjectId",e.detail.value&&e.detail.value.bisProjectId||"")),this.getData(),this.setData({currentRegisteredIndex:0,currentMembersIndex:0,currentIntegralOutputIndex:0})},onDateChanged:function(e){var t,a=e.detail.value.from,n=e.detail.value.to;a=a?a.replace(/-/g,"/"):"2020/11/20",n=n?n.replace(/-/g,"/"):"2020/11/20",this.setData((t={},(0,o.default)(t,"params.queryStartTime",a),(0,o.default)(t,"params.queryEndTime",n),t)),this.getData(),this.setData({currentRegisteredIndex:0,currentMembersIndex:0,currentIntegralOutputIndex:0})},bindselected:function(e){var t=this;e.detail.forEach((function(e){var a=e.split("-"),n=a[0],i=a[1];"storeType"===n&&t.setData((0,o.default)({},"params.storeType",i)),"stage"===n&&t.setData({"params.stage":i})}))},getChannels:function(){var e=this;return(0,r.default)(s.default.mark((function t(){var a,n,i,r;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p.globalData.request.options({loading:!0}).get("https://proservice.powerlong.com/pms/statistics/memberStatistics/memberRatio",e.params);case 2:a=t.sent,e.registerFrom=a.data.registerFrom,e.memberLevel=a.data.memberLevel,e.memberSex=a.data.memberSex,n=a.data.registerFrom.map((function(e){return e.name})),i=a.data.registerFrom.map((function(e){return e.value})),r=[],i.forEach((function(e,t){var a={};a.value=e,a.name=n[t],r.push(a)})),e.setData({"registeredChannels.series[0].name":"注册渠道占比","registeredChannels.legend.data":n,"registeredChannels.series[0].data":r}),console.log("registeredChannels==",e.registeredChannels);case 12:case"end":return t.stop()}}),t)})))()},getChannelsClickData:function(){var e=this.registerFrom.map((function(e){return e.name})),t=this.registerFrom.map((function(e){return e.value})),a=[];t.forEach((function(t,n){var i={};i.value=t,i.name=e[n],a.push(i)})),this.setData({"registeredChannels.series[0].name":"注册渠道占比","registeredChannels.legend.data":e,"registeredChannels.series[0].data":a})},getSex:function(){var e=this;return(0,r.default)(s.default.mark((function t(){var a,n,i,r;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.memberSex.map((function(e){return e.name})),n=e.memberSex.map((function(e){return e.value})),i=e.getItemStyle(),r=[],n.forEach((function(e,t){var n={};n.value=e,n.name=a[t],n.itemStyle=i[t],r.push(n)})),e.setData({"registeredChannels.series[0].name":"会员性别占比","registeredChannels.legend.data":a,"registeredChannels.series[0].data":r});case 6:case"end":return t.stop()}}),t)})))()},getItemStyle:function(){var e='{ "normal": { "color": "#38BE73" } }',t='{ "normal": { "color": "#338CF0" } }',a='{ "normal": { "color": "#F83200" } }',n='{ "normal": { "color": "#56687D" } }',i='{ "normal": { "color": "#54567D" } }',r='{ "normal": { "color": "#57777D" } }',o='{ "normal": { "color": "#FFea00" } }',s=[];return s.push(JSON.parse(e)),s.push(JSON.parse(t)),s.push(JSON.parse(a)),s.push(JSON.parse(n)),s.push(JSON.parse(i)),s.push(JSON.parse(r)),s.push(JSON.parse(o)),s},getMemberPoints:function(){var e=this;return(0,r.default)(s.default.mark((function t(){var a,n,i,r;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.memberLevel.map((function(e){return e.name})),n=e.memberLevel.map((function(e){return e.value})),i=e.getItemStyle(),r=[],n.forEach((function(e,t){var n={};n.value=e,n.name=a[t],n.itemStyle=i[t],r.push(n)})),e.setData({"registeredChannels.series[0].name":"会员等级占比","registeredChannels.legend.data":a,"registeredChannels.series[0].data":r});case 6:case"end":return t.stop()}}),t)})))()},registered:function(e){var t=e.currentTarget.dataset.index,a=this.registeredTitles[t].name;this.setData({currentRegisteredIndex:t}),"注册渠道占比"==a?this.getChannelsClickData():"会员性别占比"==a?this.getSex():this.getMemberPoints()},membersTap:function(e){var t=e.currentTarget.dataset.index,a=this.membersTitles[t].name;this.setData({currentMembersIndex:t}),"新增会员占累计会员"===a?this.getHuiYuanPieClickData():"活跃会员占累计会员"===a?this.getHuiYuanPieActiveData():this.getHuiYuanPieConsumeData()},integralOutputTap:function(e){var t=e.currentTarget.dataset.index,a=this.integralOutputTitles[t].name;this.setData({currentIntegralOutputIndex:t}),"积分产出占比"===a?this.getJifenCanchuClickData():"消费积分产出业态"===a?this.getXfJfenCanChuYeTai():this.getJifenXiaoHaoZhanBi()},getJifenCanchu:function(){var e=this;return(0,r.default)(s.default.mark((function t(){var a,n,i,r,o;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p.globalData.request.options({loading:!0}).get("https://proservice.powerlong.com/pms/statistics/memberStatistics/pointsRatio",e.params);case 2:a=t.sent,e.pointsGenerates.forEach((function(t,n){e.pointsGenerate.push({name:t.name,value:a.data.pointsGenerate[0][t.key]})})),e.pointsConsumes.forEach((function(t,n){a.data.pointsConsume[0][t.key]&&e.pointsConsume.push({name:t.name,value:a.data.pointsConsume[0][t.key]})})),e.pointsCategory=a.data.pointsCategory,n=e.pointsGenerate.map((function(e){return e.name})),i=e.pointsGenerate.map((function(e){return e.value})),r=e.getItemStyle(),o=[],i.forEach((function(e,t){if(e){var a={};a.value=e,a.name=n[t],a.itemStyle=r[t],o.push(a)}})),n=o.map((function(e){return e.name})),e.setData({"integralOutput.series[0].name":"积分产出占比","integralOutput.legend.data":n,"integralOutput.series[0].data":o});case 13:case"end":return t.stop()}}),t)})))()},getJifenCanchuClickData:function(){var e=this.pointsGenerate.map((function(e){return e.name})),t=this.pointsGenerate.map((function(e){return e.value})),a=this.getItemStyle(),n=[];t.forEach((function(t,i){if(t){var r={};r.value=t,r.name=e[i],r.itemStyle=a[i],n.push(r)}})),e=n.map((function(e){return e.name})),this.setData({"integralOutput.series[0].name":"积分产出占比","integralOutput.legend.data":e,"integralOutput.series[0].data":n})},getXfJfenCanChuYeTai:function(){var e=this;return(0,r.default)(s.default.mark((function t(){var a,n,i,r;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=Object.keys(e.pointsCategory[0]),n=Object.values(e.pointsCategory[0]),i=e.getItemStyle(),r=[],n.forEach((function(e,t){var n={};n.value=e,n.name=a[t],n.itemStyle=i[t],r.push(n)})),e.setData({"integralOutput.series[0].name":"消费积分产出业态","integralOutput.legend.data":a,"integralOutput.series[0].data":r});case 6:case"end":return t.stop()}}),t)})))()},getJifenXiaoHaoZhanBi:function(){var e=this;return(0,r.default)(s.default.mark((function t(){var a,n,i,r;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.pointsConsume.map((function(e){return e.name})),n=e.pointsConsume.map((function(e){return e.value})),i=e.getItemStyle(),r=[],n.forEach((function(e,t){if(e){var n={};n.value=e,n.name=a[t],n.itemStyle=i[t],r.push(n)}})),a=r.map((function(e){return e.name})),e.setData({"integralOutput.series[0].name":"积分消耗占比","integralOutput.legend.data":a,"integralOutput.series[0].data":r});case 8:case"end":return t.stop()}}),t)})))()},endformatDate:function(e){var t=e.getTime()-864e5;t=new Date(t);var a=t.getFullYear(),n=t.getMonth()+1,i=t.getDate();return[a,n,i].map(this.formatNumber).join("/")},startformatDate:function(e){var t=this.endformatDate(e),a=t.split("/");return a[2]="01",a.join("/")},formatNumber:function(e){return e=e.toString(),e[1]?e:"0"+e}}};t.default=m},"5d16":function(e,t,a){"use strict";a.r(t);var n=a("1811"),i=a("de51");for(var r in i)"default"!==r&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("b8f1");var o,s=a("f0c5"),l=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"18b82a6a",null,!1,n["a"],o);t["default"]=l.exports},"695e":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".app-datepicker[data-v-18b82a6a]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.app-datepicker .app-datepicker-split[data-v-18b82a6a]{padding:0 %?10?%}.app-datepicker .app-datepicker-icon[data-v-18b82a6a]{margin-left:%?10?%;width:%?30?%;height:%?30?%}",""]),e.exports=t},"6c6be":function(e,t,a){"use strict";a.r(t);var n=a("7f69"),i=a("f661");for(var r in i)"default"!==r&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("7628");var o,s=a("f0c5"),l=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"c08af61c",null,!1,n["a"],o);t["default"]=l.exports},"6d5b":function(e,t,a){"use strict";a.r(t);var n=a("7258"),i=a("12fd");for(var r in i)"default"!==r&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("26a0");var o,s=a("f0c5"),l=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"633da5fe",null,!1,n["a"],o);t["default"]=l.exports},7258:function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"root"},[a("app-header",[a("app-project-selector",{attrs:{selected:e.selected,"disabled-all":!0},on:{selected:function(t){arguments[0]=t=e.$handleEvent(t),e.onProjectSelected.apply(void 0,arguments)}}}),e.params.queryProjectId?a("v-uni-view",{}):e._e(),a("v-uni-view",{attrs:{slot:"right"},slot:"right"},[a("app-picker",{attrs:{range:!0,fields:"day",from:!0,fromDate:e.params.queryStartTime,to:!0,toDate:e.params.queryEndTime},on:{changed:function(t){arguments[0]=t=e.$handleEvent(t),e.onDateChanged.apply(void 0,arguments)}}})],1)],1),a("app-section",{attrs:{title:e.global}},[a("v-uni-view",{staticClass:"global-content"},e._l(e.globalData,(function(t,n){return a("v-uni-view",{key:n,staticClass:"global-title-content"},[a("v-uni-view",{staticClass:"global-title"},[e._v(e._s(t.title))]),a("v-uni-view",{staticClass:"global-value-content"},[a("v-uni-view",{staticClass:"global-value"},[e._v(e._s(t.value||"-"))]),a("v-uni-view",{staticClass:"global-unit"},[e._v(e._s(t.unit))])],1)],1)})),1)],1),a("v-uni-view",[a("v-uni-scroll-view",{staticClass:"top-scroll",attrs:{"scroll-x":!0,"scroll-with-animation":!0}},[a("v-uni-view",{staticClass:"top-list"},e._l(e.registeredTitles,(function(t,n){return a("v-uni-view",{key:n,class:"list-item "+(e.currentRegisteredIndex==n?"list-item--selected":""),attrs:{id:"registeredTitles"+n,"data-index":n},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.registered.apply(void 0,arguments)}}},[e._v(e._s(t.name))])})),1)],1),a("v-uni-view",{staticClass:"registered-channels"},[a("app-echarts",{staticClass:"pie",attrs:{options:e.registeredChannels,height:"400rpx",canvasId:"hy1",margin:"20px"}})],1)],1),a("v-uni-view",{staticClass:"line-bg"}),a("v-uni-view",[a("v-uni-scroll-view",{staticClass:"top-scroll",attrs:{"scroll-x":!0,"scroll-with-animation":!0}},[a("v-uni-view",{staticClass:"top-list"},e._l(e.membersTitles,(function(t,n){return a("v-uni-view",{key:n,class:"list-item "+(e.currentMembersIndex==n?"list-item--selected":""),attrs:{id:"membersTitles"+n,"data-index":n},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.membersTap.apply(void 0,arguments)}}},[e._v(e._s(t.name))])})),1)],1),a("v-uni-view",{staticClass:"registered-channels"},[a("app-echarts",{staticClass:"pie",attrs:{options:e.members,height:"400rpx",canvasId:"hy2"}})],1)],1),a("v-uni-view",{staticClass:"line-bg"}),a("app-section",{attrs:{title:"会员年龄分布"}},[a("v-uni-view",{staticClass:"members-bar"},[a("app-echarts",{staticClass:"bar",attrs:{options:e.membersBar,height:"400rpx",canvasId:"hy3"}})],1)],1),a("v-uni-view",[a("v-uni-scroll-view",{staticClass:"top-scroll",attrs:{"scroll-x":!0,"scroll-with-animation":!0}},[a("v-uni-view",{staticClass:"top-list"},e._l(e.integralOutputTitles,(function(t,n){return a("v-uni-view",{key:n,class:"list-item "+(e.currentIntegralOutputIndex==n?"list-item--selected":""),attrs:{id:"integralOutputTitles"+n,"data-index":n},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.integralOutputTap.apply(void 0,arguments)}}},[e._v(e._s(t.name))])})),1)],1),a("v-uni-view",{staticClass:"integral-output"},[a("app-echarts",{staticClass:"pie",attrs:{options:e.integralOutput,height:"400rpx",canvasId:"hy4"}})],1)],1),a("v-uni-view",{staticClass:"line-bg"}),a("app-section",{attrs:{title:"消费业态分布"}},[a("v-uni-view",{staticClass:"consumption-mod"},[a("app-echarts",{staticClass:"bar",attrs:{options:e.consumptionMod,height:"400rpx",canvasId:"hy5"}})],1)],1)],1)},r=[]},7628:function(e,t,a){"use strict";var n=a("c100"),i=a.n(n);i.a},"7f69":function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return n}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"app-echarts",style:[{width:e.num>1?"calc((100vw - 30px) / "+e.num+")":"calc(100vw - "+e.margin},{height:"240px"}]},[e.canvasId?a("v-uni-canvas",{staticClass:"ec-canvas",staticStyle:{width:"100%"},attrs:{id:e.canvasId,canvasId:e.canvasId},on:{touchstart:function(t){arguments[0]=t=e.$handleEvent(t),e.touchStart.apply(void 0,arguments)},touchmove:function(t){arguments[0]=t=e.$handleEvent(t),e.touchMove.apply(void 0,arguments)},touchend:function(t){arguments[0]=t=e.$handleEvent(t),e.touchEnd.apply(void 0,arguments)},error:function(t){arguments[0]=t=e.$handleEvent(t),e.error.apply(void 0,arguments)}}}):e._e()],1)},r=[]},"8db8":function(e,t,a){"use strict";var n=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("ade3")),r={data:function(){return{component:{from:null,to:null}}},components:{},props:{fields:{type:String,default:"day"},range:{type:Boolean,default:!1},fromKey:{type:String,default:"from"},toKey:{type:String,default:"to"},fromDate:{type:String},toDate:{type:String}},watch:{fromDate:{handler:function(e){this.setData({"component.from":e})},immediate:!0},toDate:{handler:function(e){this.setData({"component.to":e})},immediate:!0}},methods:{onFromDateChanged:function(e){var t=e.detail.value;this.setData({"component.from":t});var a,n={value:t};this.range&&(n.value=(a={},(0,i.default)(a,this.fromKey,t),(0,i.default)(a,this.toKey,this.component.to),a));this.$emit("changed",{detail:n})},onToDateChanged:function(e){var t=e.detail.value;this.setData({"component.to":t});var a,n={value:t};this.range&&(n.value=(a={},(0,i.default)(a,this.fromKey,this.component.from),(0,i.default)(a,this.toKey,t),a));this.$emit("changed",{detail:n})}}};t.default=r},"9bb7":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,"uni-canvas[data-v-c08af61c]{width:100%;height:100%}.ec-canvas[data-v-c08af61c]{width:100%;height:100%}",""]),e.exports=t},b5dc:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".updata-time[data-v-633da5fe]{font-size:%?22?%;line-height:%?74?%;text-align:center;color:#c5c5c5}.global-content[data-v-633da5fe]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:start;justify-content:start;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.global-title-content[data-v-633da5fe]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;width:33%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:%?10?%}.global-title[data-v-633da5fe]{color:#757575;font-size:%?24?%}.global-value-content[data-v-633da5fe]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:baseline;-webkit-align-items:baseline;align-items:baseline}.global-value[data-v-633da5fe]{display:-webkit-box;display:-webkit-flex;display:flex;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#333;font-size:%?32?%}.global-unit[data-v-633da5fe]{-webkit-box-flex:1;-webkit-flex:1;flex:1;white-space:nowrap;color:#b0b0b0;font-size:%?20?%;padding:%?5?%}.line-bg[data-v-633da5fe]{width:100%;height:%?20?%}.registered-channels[data-v-633da5fe]{width:100%;padding:%?20?%;background-color:#fff}.members-bar[data-v-633da5fe]{width:100%;padding:%?20?%;background-color:#fff}.integral-output[data-v-633da5fe]{width:100%;\r\n  /* height: 500rpx; */padding:%?20?%;background-color:#fff}.consumption-mod[data-v-633da5fe]{width:100%;padding:%?20?%;background-color:#fff}.top-scroll[data-v-633da5fe]{background-color:#fff}.top-list[data-v-633da5fe]{background-color:#fff;padding-top:%?20?%;padding-left:%?20?%}.top-list[data-v-633da5fe]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?28?%}.list-item[data-v-633da5fe]{padding:0 %?20?%;white-space:nowrap;color:#333;font-size:%?24?%}.list-item--selected[data-v-633da5fe]{font-size:%?30?%;color:#3992ba}.header-right-select[data-v-633da5fe]{margin-left:20px}.slot-right[data-v-633da5fe]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}",""]),e.exports=t},b8f1:function(e,t,a){"use strict";var n=a("31dd"),i=a.n(n);i.a},c100:function(e,t,a){var n=a("9bb7");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("2dae7aeb",n,!0,{sourceMap:!1,shadowMode:!1})},ccb5:function(e,t,a){"use strict";function n(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}a("c975"),a("b64b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},de51:function(e,t,a){"use strict";a.r(t);var n=a("8db8"),i=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},e777:function(e,t,a){"use strict";var n=a("4ea4");a("a9e3"),a("b680"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("5530")),r=n(a("15fd")),o={},s={data:function(){return{chartId:null,ec:{onInit:null},tongbi:null}},components:{},props:{id:{type:String,default:null},height:{type:String,default:"300rpx"},options:{type:Object,default:function(){return{}}},num:{type:Number,default:1},canvasId:{type:String,default:"firstCanvas"},margin:{type:String,dafault:"30px"}},watch:{options:{handler:function(e){var t=this,a=this.id||this.chartId||"echart-".concat(Date.now()),n=o[a],s=e||{},l=s.legend,u=s.xAxis,c=s.yAxis,d=s.unit,f=s.decimals,p=(s.isPaiming,s.tb),m=s.grid,h=(0,r.default)(s,["legend","xAxis","yAxis","unit","decimals","isPaiming","tb","grid"]),b=(0,i.default)({color:["#3AABFF","#9BB3C6"],legend:(0,i.default)({bottom:0,icon:"circle",itemHeight:6},l),tooltip:{show:!0,trigger:"axis",backgroundColor:"rgba(255,255,255,.7)",textStyle:{color:"#000000",top:"16px"},extraCssText:{top:"16px"},formatter:function(e,t,a){var n="";if("paiming"===f){e.length>0&&(n+=e[0].axisValue+"\n<br/>");for(var i=0,r=e.length;i<r;i++)null!=e[i].value?n+=e[i].seriesName+" : "+e[i].value+"\n<br/>":n+=e[i].seriesName+" : -\n<br/>";if(2===e.length&&!p&&null!=e[0].value&&null!=e[1].value){var o=Number(e[0].value),s=Number(e[1].value),l="";l=0==o||0==s?"-":((o-s)/s*100).toFixed(2),n+="同比："+l+"%"}return n}if("xiaoshoupaiming"===f){e.length>0&&(n+=e[0].axisValue+"\n<br/>");for(i=0,r=e.length;i<r;i++)null!=e[i].value?n+=e[i].seriesName+" : "+e[i].value+[d]+"\n<br/>":n+=e[i].seriesName+" : -\n<br/>";if(2===e.length&&!p&&null!=e[0].value&&null!=e[1].value){var u=Number(e[0].value),c=Number(e[1].value),m="";m=0==u||0==c?"-":((u-c)/c*100).toFixed(2),n+="同比："+m+"%"}return n}e.length>0&&(n+=e[0].axisValue+"\n<br/>");for(i=0,r=e.length;i<r;i++)null!=e[i].value?n+=e[i].seriesName+" : "+e[i].value+[d]+"\n<br/>":n+=e[i].seriesName+" : -\n<br/>";return 2!==e.length||p||null!=e[0].value&&null!=e[1].value&&(n+="同比："+(Number(e[0].value)-Number(e[1].value)).toFixed(2)+[d]),n}},grid:(0,i.default)({top:10,bottom:30,left:5,right:5,containLabel:!0},m),xAxis:(0,i.default)({boundaryGap:!1,nameTextStyle:{color:"#f00"},axisLine:{show:!0,lineStyle:{color:"#C9CCDA"}},axisLabel:{textStyle:{color:"#ABB9BE"}},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{type:"dashed"}}},u),yAxis:(0,i.default)({boundaryGap:!1,axisLine:{show:!0,lineStyle:{color:"#C9CCDA"}},axisLabel:{textStyle:{color:"#ABB9BE"}},axisTick:{show:!1},splitLine:{show:!1}},c)},h);b.series&&"pie"===b.series[0].type&&(b.xAxis.axisLine.show=!1),n?this.$echarts.setOption(b):setTimeout((function(){try{t.initEcharts(b)}catch(e){}}),500)},immediate:!0,deep:!0}},destroyed:function(){delete o[this.chartId]},methods:{initEcharts:function(e,t,a,n){var i=this.canvasId,r=document.getElementById(i);try{var o=this.$echarts.init(r);o&&(console.log("options==",e),o.setOption(e))}catch(s){console.log("echarts-error:",s)}},touchStart:function(){},touchMove:function(){},touchEnd:function(){},error:function(){}}};t.default=s},f661:function(e,t,a){"use strict";a.r(t);var n=a("e777"),i=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},fedb:function(e,t,a){var n=a("b5dc");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("1c39c6c2",n,!0,{sourceMap:!1,shadowMode:!1})}}]);