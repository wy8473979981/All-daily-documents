<wxs src="../../../static/js/filterNum.wxs" module="num" />
<view id="bill">
  <view class='ys-swiper-tab'>
    <view class='item-wrapper first' wx:for="{{tabs}}" wx:key="idx">
      <view class="swiper-tab-item {{item.id == currentTab ? 'active':''}}" data-current="{{item.id}}"
        bindtap="clickTab">{{item.name}}
      </view>
    </view>
  </view>
  <view class='container'>
    <view class='papel'>
      <text class="tips">最迟应付日期：{{lists.mustDate}}</text>
      <view class='bill'>
        <view class='label'>本期账单金额</view>
        <text class="money">￥{{num.filterNum(lists.mustMoney)}}</text>
      </view>
      <view class='side'>
        <view class='left'>
          <view class='label'>本期已付</view>
          <text class='money'>￥{{num.filterNum(lists.factMoney)}}</text>
        </view>
        <view class='right'>
          <view class='label'>累计欠费</view>
          <text class='money'>￥{{num.filterNum(lists.oweMoneyTotal)}}</text>
        </view>
      </view>
    </view>
    <view class='ys-block list'>
      <!-- <view class='title'>
        <text>历史账单</text>
      </view> -->
      <view class='ys-swiper-tab' style="position: static">
        <view class='item-wrapper first' wx:for="{{tabList2}}" wx:key="idx" wx:for-index="idx" wx:for-item="item">
          <view class="swiper-tab-item {{item.id == currentTab2 ? 'active2':''}}" data-current="{{item.id}}"
            bindtap="clickTab2">{{item.name}}
          </view>
        </view>
      </view>

      <view
        class="items {{(currentTab2 === 'noPay' || currentTab2 === 'all' || currentTab2 === 'process') ? 'has-checkbox' : ''}}">
        <view class='item' style="border: none"
          wx:if="{{currentTab2 === 'noPay' || currentTab2 === 'process'  && pageList.length > 0}}">
          <text>全选</text>
          <checkbox-group class="item-checkbox" bindchange="checkAll">
            <checkbox checked="{{isCheckAll}}" />
          </checkbox-group>
        </view>
        <view class='item' wx:for="{{pageList}}" wx:key="idx" wx:for-index="idx" wx:for-item="item">
          <checkbox-group wx:if="{{item.payStatus === '01' || item.payStatus === '02'}}" class="item-checkbox"
            bindchange="checkboxChange" data-item="{{item}}" data-index="{{idx}}">
            <checkbox checked="{{item.isChecked}}" />
          </checkbox-group>
          <!-- <view bindtap="showAccount" data-item="{{item}}"> -->
          <view data-item="{{item}}">
            <view class='item-info'>
              <view class='type'>
                <label>类型:</label>
                <text>{{item.typeName}}</text>
              </view>
              <view class='money'>
                <label>金额:</label>
                <text>{{num.filterNum(item.actuallyMustMoney)}}</text>
              </view>
              <view class='status'>
                <label>状态:</label>
                <!-- <text style='color:#02d7c0;' wx:if="{{item.oweMoney == 0}}">已缴清</text>
              <text style='color:#ffa300;' wx:if="{{item.oweMoney != 0}}">未缴清</text> -->
                <text style='color:#ffa300;' wx:if="{{item.payStatus == '01'}}">未缴清</text>
                <text style='color:#ffa300;'
                  wx:if="{{item.payStatus == '02'|| item.payStatus == '03'||item.payStatus == '04'}}">处理中</text>
                <text style='color:#ffa300;' wx:if="{{item.payStatus == '05'}}">已缴清</text>
              </view>
            </view>
            <view class='date-list'>
              <view>
                <label>账期:</label>
                <text wx:if="{{item.startDate && item.endDate}}">{{item.startDate}}~{{item.endDate}}</text>
                <text wx:else></text>
              </view>
              <view>
                <label>最迟缴费日:</label>
                <text>{{item.lastDate}}</text>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
  <view class="ys-fixed-footer" wx:if="{{currentTab2 === 'noPay' || currentTab2 === 'all'}}">
    <button class="ys-btn ys-footer-btn btn1" hover-class="btn-hover" bindtap="makeOrder"
      data-type="bocomm_public">银行转账</button>
    <button wx:if="{{lists.showButton}}" class="ys-btn ys-footer-btn btn2" hover-class="btn-hover"
      data-type="bocomm_private" bindtap="makeOrder">微信支付</button>
  </view>
  <view class="ys-fixed-footer" wx:if="{{currentTab2 === 'process'}}">
    <button class="ys-btn ys-footer-btn btn1" hover-class="btn-hover" bindtap="continuePay"
      data-type="bocomm_public">继续支付</button>
    <button wx:if="{{lists.showButton}}" class="ys-btn ys-footer-btn btn2" hover-class="btn-hover"
      data-type="bocomm_private" bindtap="cancelPay">取消支付</button>
  </view>
</view>