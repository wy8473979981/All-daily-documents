<view class="index-main">
  <app-header>
    <app-project-selector bindselected="onProjectSelected" />
    <view class="project-leader" wx:if='{{params.bisProjectId}}' bindtap='showLeaderDetail'>
      <image class="leader-avatar" src="../../assets/images/leader.png" lazy-load="false"></image>
      <view class="">项目总</view>
    </view>
    <view slot="right">
      <app-picker bind:changed="onDateChanged" fields="month" fromDate='{{params.yearMonth}}' />
    </view>
  </app-header>
  <view class="header-tab-box">
    <view class="tab-list-box">
      <view class="tab-list-item {{ item.code === params.storeType ? 'border-current' : '' }}" data-type="{{ item.code }}" wx:for="{{ tabList }}" wx:key="index" bindtap="changeTab">
        {{ item.name }}
      </view>
    </view>
    <view class="ranking-to" bindtap='gotoRanking' wx:if='{{!params.bisProjectId}}'>指标排名</view>
  </view>
  <!-- 这里是环形图 -->
  <view class="charts-box">
    <view class="charts-item" wx:for='{{pieOptions}}'>
      <app-echarts class="pie" options="{{item}}" height='180px'></app-echarts>
    </view>
  </view>
  <!-- 整体情况 -->
  <app-section title="空铺">
    <view class="index-item-box">
      <view class="index-item-row">
        <view class="item-inner-label">总考核面积</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{empryStore.allSquare || '-'}}</view>
          <view class="inner-data-unit" wx:if='{{empryStore.allSquare}}'>万㎡</view>
        </view>
      </view>
      <view class="index-item-inner">
        <view class="item-inner-label">空铺面积</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{empryStore.emptySquare||'-'}}</view>
          <view class="inner-data-unit">万㎡</view>
        </view>
      </view>
      <view class="index-item-inner">
        <view class="item-inner-label">本月去化</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{empryStore.subSquare || '-'}}</view>
          <view class="inner-data-unit">万㎡</view>
        </view>
      </view>
      <view class="index-item-inner">
        <view class="item-inner-label">本月新增</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{empryStore.addSquare || '-'}}</view>
          <view class="inner-data-unit">万㎡</view>
        </view>
      </view>
      <view class="index-item-inner">
        <view class="item-inner-label">空铺数</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{empryStore.emptyNum || '-'}}</view>
          <view class="inner-data-unit">个</view>
        </view>
      </view>
      <view class="index-item-inner">
        <view class="item-inner-label">当月去化</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{empryStore.subNum || '-'}}</view>
          <view class="inner-data-unit">个</view>
        </view>
      </view>
      <view class="index-item-inner">
        <view class="item-inner-label">本月新增</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{empryStore.addNum || '-'}}</view>
          <view class="inner-data-unit">个</view>
        </view>
      </view>
    </view>
  </app-section>
  <app-section title="清欠">
    <view class="index-item-box">
      <view class="index-item-inner">
        <view class="item-inner-label">累计欠费</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{dataDetail.oweTotal || '-'}}</view>
          <view class="inner-data-unit" v-if="{{dataDetail.oweTotal}}">万元</view>
        </view>
      </view>
      <view class="index-item-inner">
        <view class="item-inner-label">当月清欠</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{dataDetail.oweMonthTotal || '-'}}</view>
          <view class="inner-data-unit" v-if="{{dataDetail.oweMonthTotal}}">万元</view>
        </view>
      </view>
      <view class="index-item-inner">
        <view class="item-inner-label">清欠率</view>
        <view class="item-inner-data">
          <view class="inner-data-num">-</view>
        </view>
      </view>
    </view>
  </app-section>
  <app-section title="客流">
    <view class="index-item-box">
      <view class="index-item-inner">
        <view class="item-inner-label">当月指标</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{dataDetail.ipvaMonthTarget || '-'}}</view>
          <view class="inner-data-unit" wx:if='{{dataDetail.ipvaMonthTarget}}'>万</view>
        </view>
      </view>
      <view class="index-item-inner">
        <view class="item-inner-label">当月实际</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{dataDetail.ipvaNum || '-'}}</view>
          <view class="inner-data-unit" v-if='{{dataDetail.ipvaNum}}'>万</view>
        </view>
      </view>
      <view class="index-item-inner">
        <view class="item-inner-label">达成率</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{dataDetail.ipvaMonthTargetRate || '-'}}</view>
        </view>
      </view>
    </view>
  </app-section>
  <app-section title="租金收入">
    <view class="index-item-box">
      <view class="index-item-inner">
        <view class="item-inner-label">当月指标</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{dataDetail.rentFactTotalMonthTarget || '-'}}</view>
          <view class="inner-data-unit">万元</view>
        </view>
      </view>
      <view class="index-item-inner">
        <view class="item-inner-label">当月实际</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{dataDetail.rentFactTotal || '-'}}</view>
          <view class="inner-data-unit" wx:if='dataDetail.rentFactTotal'>万元</view>
        </view>
      </view>
      <view class="index-item-inner">
        <view class="item-inner-label">达成率</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{dataDetail.rentFactTotalMonthTargetRate || '-'}}</view>
        </view>
      </view>
    </view>
  </app-section>
  <app-section title="物管收入">
    <view class="index-item-box">
      <view class="index-item-inner">
        <view class="item-inner-label">当月指标</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{dataDetail.propFactTotalMonthTarget  ||'-'}}</view>
          <view class="inner-data-unit">万元</view>
        </view>
      </view>
      <view class="index-item-inner">
        <view class="item-inner-label">当月实际</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{dataDetail.propFactTotal || '-'}}</view>
          <view class="inner-data-unit" wx:if="{{dataDetail.propFactTotal}}">万元</view>
        </view>
      </view>
      <view class="index-item-inner">
        <view class="item-inner-label">达成率</view>
        <view class="item-inner-data">
        </view>
      </view>
    </view>
  </app-section>
  <app-section title="销售">
    <view class="index-item-box">
      <view class="index-item-inner">
        <view class="item-inner-label">当月指标</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{dataDetail.salesMonthMonthTarget || '-'}}</view>
          <view class="inner-data-unit">万元</view>
        </view>
      </view>
      <view class="index-item-inner">
        <view class="item-inner-label">当月实际</view>
        <view class="item-inner-data">
          <view class="inner-data-num">{{dataDetail.salesMonth || '-'}}</view>
          <view class="inner-data-unit" wx:if="{{dataDetail.salesMonth}}">万元</view>
        </view>
      </view>
      <view class="index-item-inner">
        <view class="item-inner-label">达成率</view>
        <view class="item-inner-data">
        </view>
      </view>
    </view>
  </app-section>
  <view class="project-leader-modal" wx:if='{{showLeader}}'>
    <view class="leader-modal-inner" wx:if='{{leaderDetail}}'>
      <view class="leader-name">{{leaderDetail.userName}}</view>
      <view class="leader-title" wx:for='{{leaderDetail.resultList}}'>
        {{item.workDuty}} ({{item.type===1?item.startDate:item.startDate +'-' + item.endDate}})
      </view>
      <view class="leader-title">入职：{{leaderDetail.attendWorkDate}}</view>
      <view class="leader-close" bindtap='closeModal'>X</view>
    </view>
  </view>
</view>