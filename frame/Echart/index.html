<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>ECharts</title>
    <!-- 引入刚刚下载的 ECharts 文件 -->
    <script src="echarts.js"></script>
    <script src="shanghai.js"></script>
  </head>
  <body>
    <!-- 为 ECharts 准备一个定义了宽高的 DOM -->
    <div id="main" style="width: 600px; height: 400px"></div>
    <script type="text/javascript">
      // 基于准备好的dom，初始化echarts实例
      var myChart = echarts.init(document.getElementById("main"));

      // // 指定图表的配置项和数据
      // var option = {
      //   title: {
      //     text: "ECharts 入门示例",
      //   },
      //   tooltip: {},
      //   legend: {
      //     data: ["销量"],
      //   },
      //   xAxis: {
      //     data: ["衬衫", "羊毛衫", "雪纺衫", "裤子", "高跟鞋", "袜子"],
      //   },
      //   yAxis: {},
      //   series: [
      //     {
      //       name: "销量",
      //       type: "bar",
      //       data: [5, 20, 36, 10, 10, 20],
      //     },
      //   ],
      // };

      // 使用刚指定的配置项和数据显示图表。
      // var data = [
      //   [
      //     [28604, 77, 17096869, "Australia", 1990],
      //     [31163, 77.4, 27662440, "Canada", 1990],
      //     [1516, 68, 1154605773, "China", 1990],
      //     [13670, 74.7, 10582082, "Cuba", 1990],
      //     [28599, 75, 4986705, "Finland", 1990],
      //     [29476, 77.1, 56943299, "France", 1990],
      //     [31476, 75.4, 78958237, "Germany", 1990],
      //     [28666, 78.1, 254830, "Iceland", 1990],
      //     [1777, 57.7, 870601776, "India", 1990],
      //     [29550, 79.1, 122249285, "Japan", 1990],
      //     [2076, 67.9, 20194354, "North Korea", 1990],
      //     [12087, 72, 42972254, "South Korea", 1990],
      //     [24021, 75.4, 3397534, "New Zealand", 1990],
      //     [43296, 76.8, 4240375, "Norway", 1990],
      //     [10088, 70.8, 38195258, "Poland", 1990],
      //     [19349, 69.6, 147568552, "Russia", 1990],
      //     [10670, 67.3, 53994605, "Turkey", 1990],
      //     [26424, 75.7, 57110117, "United Kingdom", 1990],
      //     [37062, 75.4, 252847810, "United States", 1990],
      //   ],
      //   [
      //     [44056, 81.8, 23968973, "Australia", 2015],
      //     [43294, 81.7, 35939927, "Canada", 2015],
      //     [13334, 76.9, 1376048943, "China", 2015],
      //     [21291, 78.5, 11389562, "Cuba", 2015],
      //     [38923, 80.8, 5503457, "Finland", 2015],
      //     [37599, 81.9, 64395345, "France", 2015],
      //     [44053, 81.1, 80688545, "Germany", 2015],
      //     [42182, 82.8, 329425, "Iceland", 2015],
      //     [5903, 66.8, 1311050527, "India", 2015],
      //     [36162, 83.5, 126573481, "Japan", 2015],
      //     [1390, 71.4, 25155317, "North Korea", 2015],
      //     [34644, 80.7, 50293439, "South Korea", 2015],
      //     [34186, 80.6, 4528526, "New Zealand", 2015],
      //     [64304, 81.6, 5210967, "Norway", 2015],
      //     [24787, 77.3, 38611794, "Poland", 2015],
      //     [23038, 73.13, 143456918, "Russia", 2015],
      //     [19360, 76.5, 78665830, "Turkey", 2015],
      //     [38225, 81.4, 64715810, "United Kingdom", 2015],
      //     [53354, 79.1, 321773631, "United States", 2015],
      //   ],
      // ];
      // option = {
      //   backgroundColor: {
      //     type: "radial",
      //     x: 0.3,
      //     y: 0.3,
      //     r: 0.8,
      //     colorStops: [
      //       {
      //         offset: 0,
      //         color: "#f7f8fa",
      //       },
      //       {
      //         offset: 1,
      //         color: "#cdd0d5",
      //       },
      //     ],
      //   },
      //   grid: {
      //     left: 10,
      //     containLabel: true,
      //     bottom: 10,
      //     top: 10,
      //     right: 30,
      //   },
      //   xAxis: {
      //     splitLine: {
      //       show: false,
      //     },
      //   },
      //   yAxis: {
      //     splitLine: {
      //       show: false,
      //     },
      //     scale: true,
      //   },
      //   series: [
      //     {
      //       name: "1990",
      //       data: data[0],
      //       type: "scatter",
      //       symbolSize: function (data) {
      //         return Math.sqrt(data[2]) / 5e2;
      //       },
      //       emphasis: {
      //         focus: "series",
      //         label: {
      //           show: true,
      //           formatter: function (param) {
      //             return param.data[3];
      //           },
      //           position: "top",
      //         },
      //       },
      //       itemStyle: {
      //         shadowBlur: 10,
      //         shadowColor: "rgba(120, 36, 50, 0.5)",
      //         shadowOffsetY: 5,
      //         color: {
      //           type: "radial",
      //           x: 0.4,
      //           y: 0.3,
      //           r: 1,
      //           colorStops: [
      //             {
      //               offset: 0,
      //               color: "rgb(251, 118, 123)",
      //             },
      //             {
      //               offset: 1,
      //               color: "rgb(204, 46, 72)",
      //             },
      //           ],
      //         },
      //       },
      //     },
      //     {
      //       name: "2015",
      //       data: data[1],
      //       type: "scatter",
      //       symbolSize: function (data) {
      //         return Math.sqrt(data[2]) / 5e2;
      //       },
      //       emphasis: {
      //         focus: "series",
      //         label: {
      //           show: true,
      //           formatter: function (param) {
      //             return param.data[3];
      //           },
      //           position: "bottom",
      //         },
      //       },
      //       itemStyle: {
      //         shadowBlur: 10,
      //         shadowColor: "rgba(25, 100, 150, 0.5)",
      //         shadowOffsetY: 5,
      //         color: {
      //           type: "radial",
      //           x: 0.4,
      //           y: 0.3,
      //           r: 1,
      //           colorStops: [
      //             {
      //               offset: 0,
      //               color: "rgb(129, 227, 238)",
      //             },
      //             {
      //               offset: 1,
      //               color: "rgb(25, 183, 207)",
      //             },
      //           ],
      //         },
      //       },
      //     },
      //   ],
      // };

      // option = {
      //   legend: {},
      //   tooltip: {},
      //   dataset: {
      //     // 提供一份数据。
      //     source: [
      //       ["product", "2015", "2016", "2017"],
      //       ["Matcha Latte", 43.3, 85.8, 93.7],
      //       ["Milk Tea", 83.1, 73.4, 55.1],
      //       ["Cheese Cocoa", 86.4, 65.2, 82.5],
      //       ["Walnut Brownie", 72.4, 53.9, 39.1],
      //     ],
      //   },
      //   // 声明一个 X 轴，类目轴（category）。默认情况下，类目轴对应到 dataset 第一列。
      //   xAxis: { type: "category" },
      //   // 声明一个 Y 轴，数值轴。
      //   yAxis: {},
      //   // 声明多个 bar 系列，默认情况下，每个系列会自动对应到 dataset 的每一列。
      //   series: [{ type: "bar" }, { type: "bar" }, { type: "bar" }],
      // };

      // option = {
      //   legend: {},
      //   tooltip: {},
      //   dataset: {
      //     source: [
      //       ["product", "2012", "2013", "2014", "2015"],
      //       ["Matcha Latte", 41.1, 30.4, 65.1, 53.3],
      //       ["Milk Tea", 86.5, 92.1, 85.7, 83.1],
      //       ["Cheese Cocoa", 24.1, 67.2, 79.5, 86.4],
      //     ],
      //   },
      //   xAxis: [
      //     { type: "category", gridIndex: 0 },
      //     { type: "category", gridIndex: 1 },
      //   ],
      //   yAxis: [{ gridIndex: 0 }, { gridIndex: 1 }],
      //   grid: [{ bottom: "55%" }, { top: "55%" }],
      //   series: [
      //     // 这几个系列会出现在第一个直角坐标系中，每个系列对应到 dataset 的每一行。
      //     { type: "bar", seriesLayoutBy: "row" },
      //     { type: "bar", seriesLayoutBy: "row" },
      //     { type: "bar", seriesLayoutBy: "row" },
      //     // 这几个系列会出现在第二个直角坐标系中，每个系列对应到 dataset 的每一列。
      //     { type: "bar", xAxisIndex: 1, yAxisIndex: 1 },
      //     { type: "bar", xAxisIndex: 1, yAxisIndex: 1 },
      //     { type: "bar", xAxisIndex: 1, yAxisIndex: 1 },
      //     { type: "bar", xAxisIndex: 1, yAxisIndex: 1 },
      //   ],
      // };

      // var option = {
      //   dataset: {
      //     source: [
      //       ["score", "amount", "product"],
      //       [89.3, 58212, "Matcha Latte"],
      //       [57.1, 78254, "Milk Tea"],
      //       [74.4, 41032, "Cheese Cocoa"],
      //       [50.1, 12755, "Cheese Brownie"],
      //       [89.7, 20145, "Matcha Cocoa"],
      //       [68.1, 79146, "Tea"],
      //       [19.6, 91852, "Orange Juice"],
      //       [10.6, 101852, "Lemon Juice"],
      //       [32.7, 20112, "Walnut Brownie"],
      //     ],
      //   },
      //   xAxis: {},
      //   yAxis: { type: "category" },
      //   series: [
      //     {
      //       type: "bar",
      //       encode: {
      //         // 将 "amount" 列映射到 X 轴。
      //         x: "amount",
      //         // 将 "product" 列映射到 Y 轴。
      //         y: "product",
      //       },
      //     },
      //   ],
      // };

      var data = [
        ["121.490317", "31.222771", 11334],
        ["121.43752", "31.179973", 7883],
        ["121.4222", "31.218123", 5598],
        ["121.448224", "31.229003", 5346],
        ["121.392499", "31.241701", 4346],
        ["121.491832", "31.26097", 2686],
        ["121.522797", "31.270755", 2468],
        ["121.375972", "31.111658", 1202],
        ["121.489934", "31.398896", 1036],
        ["121.250333", "31.383524", 936],
        ["121.567706", "31.245944", 722],
        ["121.223543", "31.03047", 713],
        ["121.113021", "31.151209", 702],
        ["121.458472", "30.912345", 702],
        ["121.397516", "31.626946", 702],
      ];
      let areaData = [];
      data.map((item) => {
        //扩大热力图效果
        areaData.push(...new Array(3).fill(item));
      });
      let mapMax = Math.max(...data.map((item) => item[6]));
      let mapMin = Math.min(...data.map((item) => item[1]));
      var option = {
        backgroundColor: "#333",
        visualMap: {
          bottom: 100,
          left: 100,
          color: ["#ff4601", "#fffc00", "#87cffa"],
          min: mapMin,
          max: mapMax,
          calculable: true,
          textStyle: {
            color: "#fff",
            fontSize: 12,
          },
        },
        geo: {
          map: "上海",
          layoutCenter: ["55%", "50%"],
          layoutSize: 650,
          top: 0,
          label: {
            normal: {
              show: true,
              color: "#fff",
            },
            emphasis: {
              color: "#fff",
            },
          },
          itemStyle: {
            normal: {
              areaColor: "#17439a",
              borderColor: "#fff",
            },
            emphasis: {
              areaColor: "#17439a",
              borderColor: "#fff",
            },
          },
        },
        series: [
          {
            name: "AQI",
            type: "heatmap",
            coordinateSystem: "geo",
            blurSize: 40,
            data: areaData,
          },
        ],
      };
      myChart.setOption(option);
    </script>
  </body>
</html>
