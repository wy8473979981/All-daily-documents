<!DOCTYPE html>
<html>
  <head>
    <title>随机数</title>
  </head>
  <body>
    <script src="https://cdn.bootcss.com/FileSaver.js/2014-11-29/FileSaver.js"></script>
    <input type="button" id="export" value="保存" />
  </body>

  <script>
    var all = [];
    var timer = setInterval(() => {
      if (all.length > 17721088) {
        clearInterval(timer);
        saveHandler();
        return;
      }
      all.push(createNum());
    }, 0);
    function createNum() {
      var arr = [];
      //红色球 6个
      while (arr.length < 6) {
        var random_num = Math.floor(Math.random() * 33) + 1; //js随机数1到33
        var result_sum = prefixInteger(parseInt(random_num, 10), 2);
        if (!arr.includes(result_sum)) {
          arr.push(result_sum);
        }
      }
      arr.sort((a, b) => a - b);
      //蓝色球 1个
      while (arr.length < 7) {
        var random_num = Math.floor(Math.random() * 16) + 1; //js随机数1到16
        var result_sum = prefixInteger(parseInt(random_num, 10), 2);
        if (!arr.includes(result_sum)) {
          arr.push(result_sum);
        }
      }
      return arr;
    }

    // num传入的数字，n需要的字符长度
    //例如：传入6，需要的字符长度为3，调用方法后字符串结果为：006
    function prefixInteger(num, n) {
      return (Array(n).join(0) + num).slice(-n);
    }

    var button = document.getElementById("export");
    button.addEventListener("click", saveHandler, false);
    function saveHandler() {
      var content = JSON.stringify(all);
      var blob = new Blob([content], { type: "text/plain;charset=utf-8" });
      saveAs(blob, "save.json");
      getFiveNumber();
    }

    function getFiveNumber() {
      var o_str = [];
      all.forEach((item) => {
        o_str.push(item.join());
      });
      var setAry = [...new Set(o_str)];
      var result = Array(3).fill(8);
      result.forEach((item, index, ary) => {
        let i = Math.floor(Math.random() * all.length);
        ary[index] = all[i];
      });
      console.log("result", result);
    }
  </script>
</html>
