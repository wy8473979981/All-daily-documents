<!DOCTYPE html>
<html>
  <head>
    <title>随机数</title>
  </head>
  <body>
    <script src="https://cdn.bootcss.com/FileSaver.js/2014-11-29/FileSaver.js"></script>
    <input type="button" id="export" value="保存" />
  </body>

  <script>
    var all = Array(10000000).fill(0);
    all.forEach((_item, index, ary) => {
      ary[index] = createNum();
    });
    getFiveNumber(all);
    saveHandler();

    function createNum () {
      var arr = [];
      //红色球 6个
      while (arr.length < 6) {
        var result_sum = prefixInteger(parseInt(Math.floor(Math.random() * 33) + 1, 10), 2);
        if (!arr.includes(result_sum)) {
          arr.push(result_sum);
        }
      }
      arr.sort((a, b) => a - b);
      //蓝色球 1个
      while (arr.length < 7) {
        var result_sum = prefixInteger(parseInt(Math.floor(Math.random() * 16) + 1, 10), 2)
        if (!arr.includes(result_sum)) {
          arr.push(result_sum);
        }
      }
      if (all.includes(arr.join())) {
        return createNum()
      } else {
        return arr.join();
      }
      // return arr.join();
    }

    // num传入的数字，n需要的字符长度
    //例如：传入6，需要的字符长度为3，调用方法后字符串结果为：006
    function prefixInteger(num, n) {
      return (Array(n).join(0) + num).slice(-n);
    }

    var button = document.getElementById("export");
    button.addEventListener("click", saveHandler, false);
    function saveHandler() {
      var content = JSON.stringify(all);
      var blob = new Blob([content], { type: "text/plain;charset=utf-8" });
      saveAs(blob, "save.json");
    }

    function getFiveNumber(all) {
      var result = Array(3).fill(8);
      result.forEach((item, index, ary) => {
        let i = Math.floor(Math.random() * all.length);
        ary[index] = all[i];
      });
      console.log("result", result);
    }
  </script>
</html>
